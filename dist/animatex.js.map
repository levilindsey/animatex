{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/animation-job.js","src/animator.js","src/frame-latency-profiler.js","src/index.js","src/persistent-animation-job.js","src/transient-animation-job.js","src/util.js"],"names":[],"mappings":"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","file":"animatex.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/**\n * An AnimationJob is used with the animator controller to update and re-draw something each frame.\n *\n * @abstract\n */\nclass AnimationJob {\n  /**\n   * @param {Function} [onComplete] A callback to be called when this AnimationJob is finished.\n   */\n  constructor(onComplete) {\n    // AnimationJob is an abstract class. It should not be instantiated directly.\n    if (new.target === AnimationJob) {\n      throw new TypeError('Cannot construct AnimationJob instances directly');\n    }\n\n    this._startTime = 0;\n    this._isComplete = true;\n    this._onComplete = onComplete;\n  }\n\n  /**\n   * Indicates whether this AnimationJob is complete.\n   *\n   * @return {boolean}\n   */\n  get isComplete() {\n    return this._isComplete;\n  }\n\n  /**\n   * Sets this AnimationJob as started.\n   *\n   * @param {DOMHighResTimeStamp} startTime\n   */\n  start(startTime) {\n    this._startTime = startTime;\n    this._isComplete = false;\n  }\n\n  /**\n   * Updates the animation progress of this AnimationJob to match the given time.\n   *\n   * This is called from the overall animation loop.\n   *\n   * @param {DOMHighResTimeStamp} currentTime\n   * @param {DOMHighResTimeStamp} deltaTime\n   * @abstract\n   */\n  update(currentTime, deltaTime) {\n    // Extending classes should implement this method.\n    throw new TypeError('Method not implemented');\n  }\n\n  /**\n   * Draws the current state of this AnimationJob.\n   *\n   * This is called from the overall animation loop.\n   *\n   * @abstract\n   */\n  draw() {\n    // Extending classes should implement this method.\n    throw new TypeError('Method not implemented');\n  }\n\n  /**\n   * Handles any necessary state for this AnimationJob being finished.\n   *\n   * @param {boolean} isCancelled\n   */\n  finish(isCancelled) {\n    console.log(`${this.constructor.name} ${isCancelled ? 'cancelled' : 'completed'}`);\n\n    this._isComplete = true;\n\n    if (this._onComplete) {\n      this._onComplete();\n    }\n  }\n}\n\nexport {AnimationJob};\n","import {FrameLatencyProfiler} from './frame-latency-profiler';\nimport {PersistentAnimationJob} from './persistent-animation-job';\nimport {TransientAnimationJob} from './transient-animation-job';\n\nconst _DELTA_TIME_UPPER_THRESHOLD = 200;\nconst _FRAME_DURATION_WARNING_THRESHOLD = 1000 / 30;\nconst _FRAME_LATENCY_LOG_PERIOD = 5000;\nconst _LATENCY_LOG_LABEL = 'Animation frame period';\n\n/**\n * This class handles the animation loop.\n *\n * This class's responsibilities include:\n * - updating modules for the current frame,\n * - drawing renderables for the current frame,\n * - starting and stopping transient animation jobs,\n * - capping time step durations at a max threshold.\n */\nclass Animator {\n  constructor() {\n    this._jobs = [];\n    this._previousTime = null;\n    this._isPaused = true;\n    this._requestAnimationFrameId = null;\n    this._totalUnpausedRunTime = 0;\n    this._lastUnpauseTime = null;\n    this._latencyProfiler = new FrameLatencyProfiler(_FRAME_LATENCY_LOG_PERIOD,\n        _FRAME_DURATION_WARNING_THRESHOLD, _LATENCY_LOG_LABEL);\n  }\n\n  /**\n   * Starts the given AnimationJob.\n   *\n   * @param {AnimationJob} job\n   */\n  startJob(job) {\n    // Is this a restart?\n    if (!job.isComplete) {\n      console.debug(`Restarting AnimationJob: ${job.constructor.name}`);\n\n      if (job instanceof PersistentAnimationJob) {\n        job.reset();\n      } else {\n        job.finish(true);\n        job.start(window.performance.now());\n      }\n    } else {\n      console.debug(`Starting AnimationJob: ${job.constructor.name}`);\n\n      job.start(this._previousTime);\n      this._jobs.push(job);\n    }\n\n    this._startAnimationLoop();\n  }\n\n  /**\n   * Cancels the given AnimationJob.\n   *\n   * @param {AnimationJob} job\n   */\n  cancelJob(job) {\n    console.debug(`Cancelling AnimationJob: ${job.constructor.name}`);\n    job.finish(true);\n  }\n\n  /**\n   * Cancels all running AnimationJobs.\n   */\n  cancelAll() {\n    while (this._jobs.length) {\n      this.cancelJob(this._jobs[0]);\n    }\n  }\n\n  /** @returns {DOMHighResTimeStamp} */\n  get currentTime() {\n    return this._previousTime;\n  }\n\n  /** @returns {boolean} */\n  get isPaused() {\n    return this._isPaused;\n  }\n\n  pause() {\n    this._stopAnimationLoop();\n    console.debug('Animator paused');\n  }\n\n  unpause() {\n    this._startAnimationLoop();\n    console.debug('Animator unpaused');\n  }\n\n  /**\n   * This is the animation loop that drives all of the animation.\n   *\n   * @param {DOMHighResTimeStamp} currentTime\n   * @private\n   */\n  _animationLoop(currentTime) {\n    // When pausing and restarting, it's possible for the previous time to be slightly inconsistent\n    // with the animationFrame time.\n    if (currentTime < this._previousTime) {\n      this._previousTime = currentTime - 1;\n    }\n\n    let deltaTime = currentTime - this._previousTime;\n    this._previousTime = currentTime;\n\n    this._latencyProfiler.recordFrameLatency(deltaTime);\n\n    // Large delays between frames can cause lead to instability in the system, so this caps them to\n    // a max threshold.\n    deltaTime = deltaTime > _DELTA_TIME_UPPER_THRESHOLD ?\n        _DELTA_TIME_UPPER_THRESHOLD : deltaTime;\n\n    if (!this._isPaused) {\n      this._requestAnimationFrameId =\n          window.requestAnimationFrame(currentTime => this._animationLoop(currentTime));\n      this._updateJobs(currentTime, deltaTime);\n      this._drawJobs();\n    }\n  }\n\n  /**\n   * Updates all of the active AnimationJobs.\n   *\n   * @param {DOMHighResTimeStamp} currentTime\n   * @param {DOMHighResTimeStamp} deltaTime\n   * @private\n   */\n  _updateJobs(currentTime, deltaTime) {\n    for (let i = 0, count = this._jobs.length; i < count; i++) {\n      let job = this._jobs[i];\n\n      // Remove jobs from the list after they are complete.\n      if (job.isComplete) {\n        this._removeJob(job, i);\n        i--;\n        count--;\n        continue;\n      }\n\n      // Check whether the job is transient and has reached its end.\n      if (job instanceof TransientAnimationJob && job.endTime < currentTime) {\n        job.finish(false);\n      } else {\n        job.update(currentTime, deltaTime);\n      }\n    }\n  }\n\n  /**\n   * Removes the given job from the collection of active, animating jobs.\n   *\n   * @param {AnimationJob} job\n   * @param {number} [index=-1]\n   * @private\n   */\n  _removeJob(job, index = -1) {\n    console.debug(`Removing AnimationJob: ${job.constructor.name}`);\n\n    if (index >= 0) {\n      this._jobs.splice(index, 1);\n    } else {\n      const count = this._jobs.length;\n      for (index = 0; index < count; index++) {\n        if (this._jobs[index] === job) {\n          this._jobs.splice(index, 1);\n          break;\n        }\n      }\n    }\n\n    // Stop the animation loop when there are no more jobs to animate.\n    if (this._jobs.length === 0) {\n      this._stopAnimationLoop();\n    }\n  }\n\n  /**\n   * Draws all of the active AnimationJobs.\n   *\n   * @private\n   */\n  _drawJobs() {\n    for (let i = 0, count = this._jobs.length; i < count; i++) {\n      this._jobs[i].draw();\n    }\n  }\n\n  /**\n   * Starts the animation loop if it is not already running.\n   *\n   * This method is idempotent.\n   *\n   * @private\n   */\n  _startAnimationLoop() {\n    if (this._isPaused) {\n      this._lastUnpauseTime = window.performance.now();\n    }\n    this._isPaused = false;\n\n    // Only actually start the loop if it isn't already running and the page has focus.\n    if (!this._requestAnimationFrameId && !document.hidden) {\n      this._latencyProfiler.start();\n      this._previousTime = window.performance.now();\n      this._requestAnimationFrameId =\n          window.requestAnimationFrame(time => this._animationLoop(time));\n    }\n  }\n\n  /**\n   * Stops the animation loop.\n   *\n   * @private\n   */\n  _stopAnimationLoop() {\n    if (!this._isPaused) {\n      this._totalUnpausedRunTime += this._timeSinceLastPaused;\n    }\n    this._isPaused = true;\n    window.cancelAnimationFrame(this._requestAnimationFrameId);\n    this._requestAnimationFrameId = null;\n    this._latencyProfiler.stop();\n  }\n\n  /**\n   * Creates a promise that will resolve on the next animation loop.\n   *\n   * @returns {Promise}\n   */\n  resolveOnNextFrame() {\n    return new Promise(window.requestAnimationFrame);\n  }\n\n  /**\n   * Gets the total amount of time the animator has been running while not paused.\n   *\n   * @returns {DOMHighResTimeStamp}\n   */\n  get totalRunTime() {\n    return this._isPaused\n        ? this._totalUnpausedRunTime\n        : this._totalUnpausedRunTime + this._timeSinceLastPaused;\n  }\n\n  /**\n   * @returns {DOMHighResTimeStamp}\n   */\n  get _timeSinceLastPaused() {\n    return window.performance.now() - this._lastUnpauseTime;\n  }\n}\n\nconst animator = new Animator();\n\nexport {animator};\n\n/**\n * @typedef {number} DOMHighResTimeStamp A number of milliseconds, accurate to one thousandth of a\n * millisecond.\n */\n\n","/**\n * This class keeps track of avg/min/max frame latencies over the last logging time period and\n * periodically logs these values.\n */\nclass FrameLatencyProfiler {\n  /**\n   * @param {number} logPeriod The period at which to print latency log messages. In milliseconds.\n   * @param {number} latencyWarningThreshold If the average latency exceeds this threshold, then the\n   * log message is shown as a warning. In milliseconds.\n   * @param {string} logLabel A label to show for each latency log message.\n   */\n  constructor(logPeriod, latencyWarningThreshold, logLabel) {\n    this._logPeriod = logPeriod;\n    this._latencyWarningThreshold = latencyWarningThreshold;\n    this._logLabel = logLabel;\n\n    this._frameCount = null;\n    this._maxFrameLatency = null;\n    this._minFrameLatency = null;\n    this._avgFrameLatency = null;\n\n    this._intervalId = null;\n  }\n\n  start() {\n    this.stop();\n    this.reset();\n\n    this._intervalId = setInterval(() => {\n      this.logFrameLatency();\n      this.reset();\n    }, this._logPeriod);\n  }\n\n  stop() {\n    clearInterval(this._intervalId);\n  }\n\n  reset() {\n    this._frameCount = 0;\n    this._maxFrameLatency = Number.MIN_VALUE;\n    this._minFrameLatency = Number.MAX_VALUE;\n    this._avgFrameLatency = 0;\n  }\n\n  /**\n   * Keeps track of a running average, min value, and max value for the frame latencies.\n   *\n   * @param {DOMHighResTimeStamp} frameLatency\n   */\n  recordFrameLatency(frameLatency) {\n    this._frameCount++;\n    this._maxFrameLatency =\n        this._maxFrameLatency < frameLatency ? frameLatency : this._maxFrameLatency;\n    this._minFrameLatency =\n        this._minFrameLatency > frameLatency ? frameLatency : this._minFrameLatency;\n    this._avgFrameLatency =\n        this._avgFrameLatency + (frameLatency - this._avgFrameLatency) / this._frameCount;\n  }\n\n  logFrameLatency() {\n    if (this._frameCount > 0) {\n      const message = `${this._logLabel}:  AVG=${this._avgFrameLatency.toFixed(3)}  ` +\n          `(MAX=${this._maxFrameLatency.toFixed(3)}; MIN=${this._minFrameLatency.toFixed(3)})`;\n      if (this._maxFrameLatency >= this._latencyWarningThreshold) {\n        console.warn(message);\n      } else {\n        console.debug(message);\n      }\n    }\n  }\n}\n\nexport {FrameLatencyProfiler};\n","export * from './animation-job';\nexport * from './animator';\nexport * from './frame-latency-profiler';\nexport * from './persistent-animation-job';\nexport * from './transient-animation-job';\n","import {AnimationJob} from './animation-job';\n\n/**\n * A PersistentAnimationJob recurs or has an indefinite duration.\n *\n * @abstract\n */\nclass PersistentAnimationJob extends AnimationJob {\n  /**\n   * @param {Function} [onComplete] A callback to be called when this AnimationJob is finished.\n   */\n  constructor(onComplete) {\n    super(onComplete);\n\n    // PersistentAnimationJob is an abstract class. It should not be instantiated directly.\n    if (new.target === PersistentAnimationJob) {\n      throw new TypeError('Cannot construct PersistentAnimationJob instances directly');\n    }\n  }\n\n  /**\n   * @abstract\n   */\n  reset() {\n    // Extending classes should implement this method.\n    throw new TypeError('Method not implemented');\n  }\n}\n\nexport {PersistentAnimationJob};\n","import {_util} from './util';\n\nimport {AnimationJob} from './animation-job';\n\n/**\n * A TransientAnimationJob is temporary and has a definite beginning and end.\n *\n * @abstract\n */\nclass TransientAnimationJob extends AnimationJob {\n  /**\n   * @param {number} duration\n   * @param {number} delay\n   * @param {Function|String} easingFunction\n   * @param {Function} [onComplete] A callback to be called when this AnimationJob is finished.\n   */\n  constructor(duration, delay, easingFunction, onComplete) {\n    super(onComplete);\n\n    // TransientAnimationJob is an abstract class. It should not be instantiated directly.\n    if (new.target === TransientAnimationJob) {\n      throw new TypeError('Cannot construct TransientAnimationJob instances directly');\n    }\n\n    this._duration = duration;\n    this._delay = delay;\n    this._easingFunction = typeof easingFunction === 'function'\n        ? easingFunction\n        : _util.easingFunctions[easingFunction];\n  }\n\n  /**\n   * @returns {number}\n   */\n  get endTime() {\n    return this._startTime + this._duration + this._delay;\n  }\n}\n\nexport {TransientAnimationJob};\n","/**\n * This module defines a collection of static utility functions.\n */\n\n// A collection of different types of easing functions.\nconst easingFunctions = {\n  linear: t => t,\n  easeInQuad: t => t * t,\n  easeOutQuad: t => t * (2 - t),\n  easeInOutQuad: t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  easeInCubic: t => t * t * t,\n  easeOutCubic: t => 1 + --t * t * t,\n  easeInOutCubic: t => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  easeInQuart: t => t * t * t * t,\n  easeOutQuart: t => 1 - --t * t * t * t,\n  easeInOutQuart: t => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\n  easeInQuint: t => t * t * t * t * t,\n  easeOutQuint: t => 1 + --t * t * t * t * t,\n  easeInOutQuint: t => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t\n};\n\nconst _util = {\n  easingFunctions,\n};\n\nexport {\n  _util,\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYW5pbWF0aW9uLWpvYi5qcyIsInNyYy9hbmltYXRvci5qcyIsInNyYy9mcmFtZS1sYXRlbmN5LXByb2ZpbGVyLmpzIiwic3JjL2luZGV4LmpzIiwic3JjL3BlcnNpc3RlbnQtYW5pbWF0aW9uLWpvYi5qcyIsInNyYy90cmFuc2llbnQtYW5pbWF0aW9uLWpvYi5qcyIsInNyYy91dGlsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBOzs7OztJQUtNLGU7QUFDSjs7O0FBR0EsV0FBQSxZQUFBLENBQUEsVUFBQSxFQUF3QjtBQUFBLG9CQUFBLElBQUEsRUFBQSxZQUFBOztBQUN0QjtBQUNBLFFBQUksSUFBQSxNQUFBLEtBQUosWUFBQSxFQUFpQztBQUMvQixZQUFNLElBQUEsU0FBQSxDQUFOLGtEQUFNLENBQU47QUFDRDs7QUFFRCxTQUFBLFVBQUEsR0FBQSxDQUFBO0FBQ0EsU0FBQSxXQUFBLEdBQUEsSUFBQTtBQUNBLFNBQUEsV0FBQSxHQUFBLFVBQUE7QUFDRDs7QUFFRDs7Ozs7Ozs7O0FBU0E7Ozs7OzBCQUtNLFMsRUFBVztBQUNmLFdBQUEsVUFBQSxHQUFBLFNBQUE7QUFDQSxXQUFBLFdBQUEsR0FBQSxLQUFBO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7OzsyQkFTTyxXLEVBQWEsUyxFQUFXO0FBQzdCO0FBQ0EsWUFBTSxJQUFBLFNBQUEsQ0FBTix3QkFBTSxDQUFOO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7MkJBT087QUFDTDtBQUNBLFlBQU0sSUFBQSxTQUFBLENBQU4sd0JBQU0sQ0FBTjtBQUNEOztBQUVEOzs7Ozs7OzsyQkFLTyxXLEVBQWE7QUFDbEIsY0FBQSxHQUFBLENBQWUsS0FBQSxXQUFBLENBQWYsSUFBZSxHQUFmLEdBQWUsSUFBeUIsY0FBQSxXQUFBLEdBQXhDLFdBQWUsQ0FBZjs7QUFFQSxXQUFBLFdBQUEsR0FB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QUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsZ0JBQUEsSUFBQTtBQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLGNBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7OztBQUNBLE9BQUEsSUFBQSxDQUFBLFNBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLFFBQUEsU0FBQSxJQUFBLFFBQUEsWUFBQSxFQUFBO0FBQUEsU0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLGdCQUFBLElBQUE7QUFBQSxTQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxVQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7QUFDQSxPQUFBLElBQUEsQ0FBQSxxQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsUUFBQSxTQUFBLElBQUEsUUFBQSxZQUFBLEVBQUE7QUFBQSxTQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsZ0JBQUEsSUFBQTtBQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHNCQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7QUFDQSxPQUFBLElBQUEsQ0FBQSx1QkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsUUFBQSxTQUFBLElBQUEsUUFBQSxZQUFBLEVBQUE7QUFBQSxTQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsZ0JBQUEsSUFBQTtBQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHdCQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7QUFDQSxPQUFBLElBQUEsQ0FBQSxzQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsUUFBQSxTQUFBLElBQUEsUUFBQSxZQUFBLEVBQUE7QUFBQSxTQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsZ0JBQUEsSUFBQTtBQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHVCQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKQSxJQUFBLGdCQUFBLFFBQUEsaUJBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7Ozs7SUFLTSx5Qjs7O0FBQ0o7OztBQUdBLFdBQUEsc0JBQUEsQ0FBQSxVQUFBLEVBQXdCO0FBQUEsb0JBQUEsSUFBQSxFQUFBLHNCQUFBOztBQUd0QjtBQUhzQixRQUFBLFFBQUEsMkJBQUEsSUFBQSxFQUFBLENBQUEsdUJBQUEsU0FBQSxJQUFBLE9BQUEsY0FBQSxDQUFBLHNCQUFBLENBQUEsRUFBQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsQ0FBQSxDQUFBOztBQUl0QixRQUFJLElBQUEsTUFBQSxLQUFKLHNCQUFBLEVBQTJDO0FBQ3pDLFlBQU0sSUFBQSxTQUFBLENBQU4sNERBQU0sQ0FBTjtBQUNEO0FBTnFCLFdBQUEsS0FBQTtBQU92Qjs7QUFFRDs7Ozs7OzRCQUdRO0FBQ047QUFDQSxZQUFNLElBQUEsU0FBQSxDQUFOLHdCQUFNLENBQU47QUFDRDs7OztFQW5Ca0MsY0FBQSxZOztRQXNCN0Isc0IsR0FBQSxzQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzdCUixJQUFBLFNBQUEsUUFBQSxRQUFBLENBQUE7O0FBRUEsSUFBQSxnQkFBQSxRQUFBLGlCQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7Ozs7O0lBS00sd0I7OztBQUNKOzs7Ozs7QUFNQSxXQUFBLHFCQUFBLENBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxjQUFBLEVBQUEsVUFBQSxFQUF5RDtBQUFBLG9CQUFBLElBQUEsRUFBQSxxQkFBQTs7QUFHdkQ7QUFIdUQsUUFBQSxRQUFBLDJCQUFBLElBQUEsRUFBQSxDQUFBLHNCQUFBLFNBQUEsSUFBQSxPQUFBLGNBQUEsQ0FBQSxxQkFBQSxDQUFBLEVBQUEsSUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLENBQUEsQ0FBQTs7QUFJdkQsUUFBSSxJQUFBLE1BQUEsS0FBSixxQkFBQSxFQUEwQztBQUN4QyxZQUFNLElBQUEsU0FBQSxDQUFOLDJEQUFNLENBQU47QUFDRDs7QUFFRCxVQUFBLFNBQUEsR0FBQSxRQUFBO0FBQ0EsVUFBQSxNQUFBLEdBQUEsS0FBQTtBQUNBLFVBQUEsZUFBQSxHQUF1QixPQUFBLGNBQUEsS0FBQSxVQUFBLEdBQUEsY0FBQSxHQUVqQixPQUFBLEtBQUEsQ0FBQSxlQUFBLENBRk4sY0FFTSxDQUZOO0FBVnVELFdBQUEsS0FBQTtBQWF4RDs7QUFFRDs7Ozs7O3dCQUdjO0FBQ1osYUFBTyxLQUFBLFVBQUEsR0FBa0IsS0FBbEIsU0FBQSxHQUFtQyxLQUExQyxNQUFBO0FBQ0Q7Ozs7RUEzQmlDLGNBQUEsWTs7UUE4QjVCLHFCLEdBQUEscUI7Ozs7Ozs7O0FDdkNSOzs7O0FBSUE7QUFDQSxJQUFNLGtCQUFrQjtBQUN0QixVQUFRLFNBQUEsTUFBQSxDQUFBLENBQUEsRUFBQTtBQUFBLFdBQUEsQ0FBQTtBQURjLEdBQUE7QUFFdEIsY0FBWSxTQUFBLFVBQUEsQ0FBQSxDQUFBLEVBQUE7QUFBQSxXQUFLLElBQUwsQ0FBQTtBQUZVLEdBQUE7QUFHdEIsZUFBYSxTQUFBLFdBQUEsQ0FBQSxDQUFBLEVBQUE7QUFBQSxXQUFLLEtBQUssSUFBVixDQUFLLENBQUw7QUFIUyxHQUFBO0FBSXRCLGlCQUFlLFNBQUEsYUFBQSxDQUFBLENBQUEsRUFBQTtBQUFBLFdBQUssSUFBQSxHQUFBLEdBQVUsSUFBQSxDQUFBLEdBQVYsQ0FBQSxHQUFzQixDQUFBLENBQUEsR0FBSyxDQUFDLElBQUksSUFBTCxDQUFBLElBQWhDLENBQUE7QUFKTyxHQUFBO0FBS3RCLGVBQWEsU0FBQSxXQUFBLENBQUEsQ0FBQSxFQUFBO0FBQUEsV0FBSyxJQUFBLENBQUEsR0FBTCxDQUFBO0FBTFMsR0FBQTtBQU10QixnQkFBYyxTQUFBLFlBQUEsQ0FBQSxDQUFBLEVBQUE7QUFBQSxXQUFLLElBQUksRUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFULENBQUE7QUFOUSxHQUFBO0FBT3RCLGtCQUFnQixTQUFBLGNBQUEsQ0FBQSxDQUFBLEVBQUE7QUFBQSxXQUFLLElBQUEsR0FBQSxHQUFVLElBQUEsQ0FBQSxHQUFBLENBQUEsR0FBVixDQUFBLEdBQTBCLENBQUMsSUFBRCxDQUFBLEtBQVcsSUFBQSxDQUFBLEdBQVgsQ0FBQSxLQUF5QixJQUFBLENBQUEsR0FBekIsQ0FBQSxJQUEvQixDQUFBO0FBUE0sR0FBQTtBQVF0QixlQUFhLFNBQUEsV0FBQSxDQUFBLENBQUEsRUFBQTtBQUFBLFdBQUssSUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFMLENBQUE7QUFSUyxHQUFBO0FBU3RCLGdCQUFjLFNBQUEsWUFBQSxDQUFBLENBQUEsRUFBQTtBQUFBLFdBQUssSUFBSSxFQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFULENBQUE7QUFUUSxHQUFBO0FBVXRCLGtCQUFnQixTQUFBLGNBQUEsQ0FBQSxDQUFBLEVBQUE7QUFBQSxXQUFLLElBQUEsR0FBQSxHQUFVLElBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQVYsQ0FBQSxHQUE4QixJQUFJLElBQUksRUFBSixDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBdkMsQ0FBQTtBQVZNLEdBQUE7QUFXdEIsZUFBYSxTQUFBLFdBQUEsQ0FBQSxDQUFBLEVBQUE7QUFBQSxXQUFLLElBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUwsQ0FBQTtBQVhTLEdBQUE7QUFZdEIsZ0JBQWMsU0FBQSxZQUFBLENBQUEsQ0FBQSxFQUFBO0FBQUEsV0FBSyxJQUFJLEVBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFULENBQUE7QUFaUSxHQUFBO0FBYXRCLGtCQUFnQixTQUFBLGNBQUEsQ0FBQSxDQUFBLEVBQUE7QUFBQSxXQUFLLElBQUEsR0FBQSxHQUFVLEtBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFWLENBQUEsR0FBbUMsSUFBSSxLQUFLLEVBQUwsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUE1QyxDQUFBO0FBQUE7QUFiTSxDQUF4Qjs7QUFnQkEsSUFBTSxRQUFRO0FBQ1osbUJBQUE7QUFEWSxDQUFkOztRQUtFLEssR0FBQSxLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqXG4gKiBBbiBBbmltYXRpb25Kb2IgaXMgdXNlZCB3aXRoIHRoZSBhbmltYXRvciBjb250cm9sbGVyIHRvIHVwZGF0ZSBhbmQgcmUtZHJhdyBzb21ldGhpbmcgZWFjaCBmcmFtZS5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqL1xuY2xhc3MgQW5pbWF0aW9uSm9iIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlXSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIHRoaXMgQW5pbWF0aW9uSm9iIGlzIGZpbmlzaGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob25Db21wbGV0ZSkge1xuICAgIC8vIEFuaW1hdGlvbkpvYiBpcyBhbiBhYnN0cmFjdCBjbGFzcy4gSXQgc2hvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXG4gICAgaWYgKG5ldy50YXJnZXQgPT09IEFuaW1hdGlvbkpvYikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnN0cnVjdCBBbmltYXRpb25Kb2IgaW5zdGFuY2VzIGRpcmVjdGx5Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5fc3RhcnRUaW1lID0gMDtcbiAgICB0aGlzLl9pc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICB0aGlzLl9vbkNvbXBsZXRlID0gb25Db21wbGV0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIEFuaW1hdGlvbkpvYiBpcyBjb21wbGV0ZS5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc0NvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9pc0NvbXBsZXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBBbmltYXRpb25Kb2IgYXMgc3RhcnRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtET01IaWdoUmVzVGltZVN0YW1wfSBzdGFydFRpbWVcbiAgICovXG4gIHN0YXJ0KHN0YXJ0VGltZSkge1xuICAgIHRoaXMuX3N0YXJ0VGltZSA9IHN0YXJ0VGltZTtcbiAgICB0aGlzLl9pc0NvbXBsZXRlID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgYW5pbWF0aW9uIHByb2dyZXNzIG9mIHRoaXMgQW5pbWF0aW9uSm9iIHRvIG1hdGNoIHRoZSBnaXZlbiB0aW1lLlxuICAgKlxuICAgKiBUaGlzIGlzIGNhbGxlZCBmcm9tIHRoZSBvdmVyYWxsIGFuaW1hdGlvbiBsb29wLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUhpZ2hSZXNUaW1lU3RhbXB9IGN1cnJlbnRUaW1lXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gZGVsdGFUaW1lXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgdXBkYXRlKGN1cnJlbnRUaW1lLCBkZWx0YVRpbWUpIHtcbiAgICAvLyBFeHRlbmRpbmcgY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50IHRoaXMgbWV0aG9kLlxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGlzIEFuaW1hdGlvbkpvYi5cbiAgICpcbiAgICogVGhpcyBpcyBjYWxsZWQgZnJvbSB0aGUgb3ZlcmFsbCBhbmltYXRpb24gbG9vcC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBkcmF3KCkge1xuICAgIC8vIEV4dGVuZGluZyBjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnQgdGhpcyBtZXRob2QuXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYW55IG5lY2Vzc2FyeSBzdGF0ZSBmb3IgdGhpcyBBbmltYXRpb25Kb2IgYmVpbmcgZmluaXNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNDYW5jZWxsZWRcbiAgICovXG4gIGZpbmlzaChpc0NhbmNlbGxlZCkge1xuICAgIGNvbnNvbGUubG9nKGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0gJHtpc0NhbmNlbGxlZCA/ICdjYW5jZWxsZWQnIDogJ2NvbXBsZXRlZCd9YCk7XG5cbiAgICB0aGlzLl9pc0NvbXBsZXRlID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLl9vbkNvbXBsZXRlKSB7XG4gICAgICB0aGlzLl9vbkNvbXBsZXRlKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7QW5pbWF0aW9uSm9ifTtcbiIsImltcG9ydCB7RnJhbWVMYXRlbmN5UHJvZmlsZXJ9IGZyb20gJy4vZnJhbWUtbGF0ZW5jeS1wcm9maWxlcic7XG5pbXBvcnQge1BlcnNpc3RlbnRBbmltYXRpb25Kb2J9IGZyb20gJy4vcGVyc2lzdGVudC1hbmltYXRpb24tam9iJztcbmltcG9ydCB7VHJhbnNpZW50QW5pbWF0aW9uSm9ifSBmcm9tICcuL3RyYW5zaWVudC1hbmltYXRpb24tam9iJztcblxuY29uc3QgX0RFTFRBX1RJTUVfVVBQRVJfVEhSRVNIT0xEID0gMjAwO1xuY29uc3QgX0ZSQU1FX0RVUkFUSU9OX1dBUk5JTkdfVEhSRVNIT0xEID0gMTAwMCAvIDMwO1xuY29uc3QgX0ZSQU1FX0xBVEVOQ1lfTE9HX1BFUklPRCA9IDUwMDA7XG5jb25zdCBfTEFURU5DWV9MT0dfTEFCRUwgPSAnQW5pbWF0aW9uIGZyYW1lIHBlcmlvZCc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBoYW5kbGVzIHRoZSBhbmltYXRpb24gbG9vcC5cbiAqXG4gKiBUaGlzIGNsYXNzJ3MgcmVzcG9uc2liaWxpdGllcyBpbmNsdWRlOlxuICogLSB1cGRhdGluZyBtb2R1bGVzIGZvciB0aGUgY3VycmVudCBmcmFtZSxcbiAqIC0gZHJhd2luZyByZW5kZXJhYmxlcyBmb3IgdGhlIGN1cnJlbnQgZnJhbWUsXG4gKiAtIHN0YXJ0aW5nIGFuZCBzdG9wcGluZyB0cmFuc2llbnQgYW5pbWF0aW9uIGpvYnMsXG4gKiAtIGNhcHBpbmcgdGltZSBzdGVwIGR1cmF0aW9ucyBhdCBhIG1heCB0aHJlc2hvbGQuXG4gKi9cbmNsYXNzIEFuaW1hdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fam9icyA9IFtdO1xuICAgIHRoaXMuX3ByZXZpb3VzVGltZSA9IG51bGw7XG4gICAgdGhpcy5faXNQYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZUlkID0gbnVsbDtcbiAgICB0aGlzLl90b3RhbFVucGF1c2VkUnVuVGltZSA9IDA7XG4gICAgdGhpcy5fbGFzdFVucGF1c2VUaW1lID0gbnVsbDtcbiAgICB0aGlzLl9sYXRlbmN5UHJvZmlsZXIgPSBuZXcgRnJhbWVMYXRlbmN5UHJvZmlsZXIoX0ZSQU1FX0xBVEVOQ1lfTE9HX1BFUklPRCxcbiAgICAgICAgX0ZSQU1FX0RVUkFUSU9OX1dBUk5JTkdfVEhSRVNIT0xELCBfTEFURU5DWV9MT0dfTEFCRUwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgZ2l2ZW4gQW5pbWF0aW9uSm9iLlxuICAgKlxuICAgKiBAcGFyYW0ge0FuaW1hdGlvbkpvYn0gam9iXG4gICAqL1xuICBzdGFydEpvYihqb2IpIHtcbiAgICAvLyBJcyB0aGlzIGEgcmVzdGFydD9cbiAgICBpZiAoIWpvYi5pc0NvbXBsZXRlKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKGBSZXN0YXJ0aW5nIEFuaW1hdGlvbkpvYjogJHtqb2IuY29uc3RydWN0b3IubmFtZX1gKTtcblxuICAgICAgaWYgKGpvYiBpbnN0YW5jZW9mIFBlcnNpc3RlbnRBbmltYXRpb25Kb2IpIHtcbiAgICAgICAgam9iLnJlc2V0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqb2IuZmluaXNoKHRydWUpO1xuICAgICAgICBqb2Iuc3RhcnQod2luZG93LnBlcmZvcm1hbmNlLm5vdygpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5kZWJ1ZyhgU3RhcnRpbmcgQW5pbWF0aW9uSm9iOiAke2pvYi5jb25zdHJ1Y3Rvci5uYW1lfWApO1xuXG4gICAgICBqb2Iuc3RhcnQodGhpcy5fcHJldmlvdXNUaW1lKTtcbiAgICAgIHRoaXMuX2pvYnMucHVzaChqb2IpO1xuICAgIH1cblxuICAgIHRoaXMuX3N0YXJ0QW5pbWF0aW9uTG9vcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgdGhlIGdpdmVuIEFuaW1hdGlvbkpvYi5cbiAgICpcbiAgICogQHBhcmFtIHtBbmltYXRpb25Kb2J9IGpvYlxuICAgKi9cbiAgY2FuY2VsSm9iKGpvYikge1xuICAgIGNvbnNvbGUuZGVidWcoYENhbmNlbGxpbmcgQW5pbWF0aW9uSm9iOiAke2pvYi5jb25zdHJ1Y3Rvci5uYW1lfWApO1xuICAgIGpvYi5maW5pc2godHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyBhbGwgcnVubmluZyBBbmltYXRpb25Kb2JzLlxuICAgKi9cbiAgY2FuY2VsQWxsKCkge1xuICAgIHdoaWxlICh0aGlzLl9qb2JzLmxlbmd0aCkge1xuICAgICAgdGhpcy5jYW5jZWxKb2IodGhpcy5fam9ic1swXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEByZXR1cm5zIHtET01IaWdoUmVzVGltZVN0YW1wfSAqL1xuICBnZXQgY3VycmVudFRpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzVGltZTtcbiAgfVxuXG4gIC8qKiBAcmV0dXJucyB7Ym9vbGVhbn0gKi9cbiAgZ2V0IGlzUGF1c2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1BhdXNlZDtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMuX3N0b3BBbmltYXRpb25Mb29wKCk7XG4gICAgY29uc29sZS5kZWJ1ZygnQW5pbWF0b3IgcGF1c2VkJyk7XG4gIH1cblxuICB1bnBhdXNlKCkge1xuICAgIHRoaXMuX3N0YXJ0QW5pbWF0aW9uTG9vcCgpO1xuICAgIGNvbnNvbGUuZGVidWcoJ0FuaW1hdG9yIHVucGF1c2VkJyk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgYW5pbWF0aW9uIGxvb3AgdGhhdCBkcml2ZXMgYWxsIG9mIHRoZSBhbmltYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gY3VycmVudFRpbWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9hbmltYXRpb25Mb29wKGN1cnJlbnRUaW1lKSB7XG4gICAgLy8gV2hlbiBwYXVzaW5nIGFuZCByZXN0YXJ0aW5nLCBpdCdzIHBvc3NpYmxlIGZvciB0aGUgcHJldmlvdXMgdGltZSB0byBiZSBzbGlnaHRseSBpbmNvbnNpc3RlbnRcbiAgICAvLyB3aXRoIHRoZSBhbmltYXRpb25GcmFtZSB0aW1lLlxuICAgIGlmIChjdXJyZW50VGltZSA8IHRoaXMuX3ByZXZpb3VzVGltZSkge1xuICAgICAgdGhpcy5fcHJldmlvdXNUaW1lID0gY3VycmVudFRpbWUgLSAxO1xuICAgIH1cblxuICAgIGxldCBkZWx0YVRpbWUgPSBjdXJyZW50VGltZSAtIHRoaXMuX3ByZXZpb3VzVGltZTtcbiAgICB0aGlzLl9wcmV2aW91c1RpbWUgPSBjdXJyZW50VGltZTtcblxuICAgIHRoaXMuX2xhdGVuY3lQcm9maWxlci5yZWNvcmRGcmFtZUxhdGVuY3koZGVsdGFUaW1lKTtcblxuICAgIC8vIExhcmdlIGRlbGF5cyBiZXR3ZWVuIGZyYW1lcyBjYW4gY2F1c2UgbGVhZCB0byBpbnN0YWJpbGl0eSBpbiB0aGUgc3lzdGVtLCBzbyB0aGlzIGNhcHMgdGhlbSB0b1xuICAgIC8vIGEgbWF4IHRocmVzaG9sZC5cbiAgICBkZWx0YVRpbWUgPSBkZWx0YVRpbWUgPiBfREVMVEFfVElNRV9VUFBFUl9USFJFU0hPTEQgP1xuICAgICAgICBfREVMVEFfVElNRV9VUFBFUl9USFJFU0hPTEQgOiBkZWx0YVRpbWU7XG5cbiAgICBpZiAoIXRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCA9XG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjdXJyZW50VGltZSA9PiB0aGlzLl9hbmltYXRpb25Mb29wKGN1cnJlbnRUaW1lKSk7XG4gICAgICB0aGlzLl91cGRhdGVKb2JzKGN1cnJlbnRUaW1lLCBkZWx0YVRpbWUpO1xuICAgICAgdGhpcy5fZHJhd0pvYnMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyBhbGwgb2YgdGhlIGFjdGl2ZSBBbmltYXRpb25Kb2JzLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUhpZ2hSZXNUaW1lU3RhbXB9IGN1cnJlbnRUaW1lXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gZGVsdGFUaW1lXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXBkYXRlSm9icyhjdXJyZW50VGltZSwgZGVsdGFUaW1lKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGNvdW50ID0gdGhpcy5fam9icy5sZW5ndGg7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBsZXQgam9iID0gdGhpcy5fam9ic1tpXTtcblxuICAgICAgLy8gUmVtb3ZlIGpvYnMgZnJvbSB0aGUgbGlzdCBhZnRlciB0aGV5IGFyZSBjb21wbGV0ZS5cbiAgICAgIGlmIChqb2IuaXNDb21wbGV0ZSkge1xuICAgICAgICB0aGlzLl9yZW1vdmVKb2Ioam9iLCBpKTtcbiAgICAgICAgaS0tO1xuICAgICAgICBjb3VudC0tO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGUgam9iIGlzIHRyYW5zaWVudCBhbmQgaGFzIHJlYWNoZWQgaXRzIGVuZC5cbiAgICAgIGlmIChqb2IgaW5zdGFuY2VvZiBUcmFuc2llbnRBbmltYXRpb25Kb2IgJiYgam9iLmVuZFRpbWUgPCBjdXJyZW50VGltZSkge1xuICAgICAgICBqb2IuZmluaXNoKGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpvYi51cGRhdGUoY3VycmVudFRpbWUsIGRlbHRhVGltZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGdpdmVuIGpvYiBmcm9tIHRoZSBjb2xsZWN0aW9uIG9mIGFjdGl2ZSwgYW5pbWF0aW5nIGpvYnMuXG4gICAqXG4gICAqIEBwYXJhbSB7QW5pbWF0aW9uSm9ifSBqb2JcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtpbmRleD0tMV1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW1vdmVKb2Ioam9iLCBpbmRleCA9IC0xKSB7XG4gICAgY29uc29sZS5kZWJ1ZyhgUmVtb3ZpbmcgQW5pbWF0aW9uSm9iOiAke2pvYi5jb25zdHJ1Y3Rvci5uYW1lfWApO1xuXG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgIHRoaXMuX2pvYnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9qb2JzLmxlbmd0aDtcbiAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGNvdW50OyBpbmRleCsrKSB7XG4gICAgICAgIGlmICh0aGlzLl9qb2JzW2luZGV4XSA9PT0gam9iKSB7XG4gICAgICAgICAgdGhpcy5fam9icy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcCB0aGUgYW5pbWF0aW9uIGxvb3Agd2hlbiB0aGVyZSBhcmUgbm8gbW9yZSBqb2JzIHRvIGFuaW1hdGUuXG4gICAgaWYgKHRoaXMuX2pvYnMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9zdG9wQW5pbWF0aW9uTG9vcCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBhbGwgb2YgdGhlIGFjdGl2ZSBBbmltYXRpb25Kb2JzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2RyYXdKb2JzKCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBjb3VudCA9IHRoaXMuX2pvYnMubGVuZ3RoOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgdGhpcy5fam9ic1tpXS5kcmF3KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgYW5pbWF0aW9uIGxvb3AgaWYgaXQgaXMgbm90IGFscmVhZHkgcnVubmluZy5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgaWRlbXBvdGVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zdGFydEFuaW1hdGlvbkxvb3AoKSB7XG4gICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9sYXN0VW5wYXVzZVRpbWUgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuICAgIHRoaXMuX2lzUGF1c2VkID0gZmFsc2U7XG5cbiAgICAvLyBPbmx5IGFjdHVhbGx5IHN0YXJ0IHRoZSBsb29wIGlmIGl0IGlzbid0IGFscmVhZHkgcnVubmluZyBhbmQgdGhlIHBhZ2UgaGFzIGZvY3VzLlxuICAgIGlmICghdGhpcy5fcmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQgJiYgIWRvY3VtZW50LmhpZGRlbikge1xuICAgICAgdGhpcy5fbGF0ZW5jeVByb2ZpbGVyLnN0YXJ0KCk7XG4gICAgICB0aGlzLl9wcmV2aW91c1RpbWUgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICB0aGlzLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCA9XG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aW1lID0+IHRoaXMuX2FuaW1hdGlvbkxvb3AodGltZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyB0aGUgYW5pbWF0aW9uIGxvb3AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc3RvcEFuaW1hdGlvbkxvb3AoKSB7XG4gICAgaWYgKCF0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fdG90YWxVbnBhdXNlZFJ1blRpbWUgKz0gdGhpcy5fdGltZVNpbmNlTGFzdFBhdXNlZDtcbiAgICB9XG4gICAgdGhpcy5faXNQYXVzZWQgPSB0cnVlO1xuICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCk7XG4gICAgdGhpcy5fcmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQgPSBudWxsO1xuICAgIHRoaXMuX2xhdGVuY3lQcm9maWxlci5zdG9wKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb24gdGhlIG5leHQgYW5pbWF0aW9uIGxvb3AuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgcmVzb2x2ZU9uTmV4dEZyYW1lKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0b3RhbCBhbW91bnQgb2YgdGltZSB0aGUgYW5pbWF0b3IgaGFzIGJlZW4gcnVubmluZyB3aGlsZSBub3QgcGF1c2VkLlxuICAgKlxuICAgKiBAcmV0dXJucyB7RE9NSGlnaFJlc1RpbWVTdGFtcH1cbiAgICovXG4gIGdldCB0b3RhbFJ1blRpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUGF1c2VkXG4gICAgICAgID8gdGhpcy5fdG90YWxVbnBhdXNlZFJ1blRpbWVcbiAgICAgICAgOiB0aGlzLl90b3RhbFVucGF1c2VkUnVuVGltZSArIHRoaXMuX3RpbWVTaW5jZUxhc3RQYXVzZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0RPTUhpZ2hSZXNUaW1lU3RhbXB9XG4gICAqL1xuICBnZXQgX3RpbWVTaW5jZUxhc3RQYXVzZWQoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuX2xhc3RVbnBhdXNlVGltZTtcbiAgfVxufVxuXG5jb25zdCBhbmltYXRvciA9IG5ldyBBbmltYXRvcigpO1xuXG5leHBvcnQge2FuaW1hdG9yfTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7bnVtYmVyfSBET01IaWdoUmVzVGltZVN0YW1wIEEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYWNjdXJhdGUgdG8gb25lIHRob3VzYW5kdGggb2YgYVxuICogbWlsbGlzZWNvbmQuXG4gKi9cblxuIiwiLyoqXG4gKiBUaGlzIGNsYXNzIGtlZXBzIHRyYWNrIG9mIGF2Zy9taW4vbWF4IGZyYW1lIGxhdGVuY2llcyBvdmVyIHRoZSBsYXN0IGxvZ2dpbmcgdGltZSBwZXJpb2QgYW5kXG4gKiBwZXJpb2RpY2FsbHkgbG9ncyB0aGVzZSB2YWx1ZXMuXG4gKi9cbmNsYXNzIEZyYW1lTGF0ZW5jeVByb2ZpbGVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsb2dQZXJpb2QgVGhlIHBlcmlvZCBhdCB3aGljaCB0byBwcmludCBsYXRlbmN5IGxvZyBtZXNzYWdlcy4gSW4gbWlsbGlzZWNvbmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbGF0ZW5jeVdhcm5pbmdUaHJlc2hvbGQgSWYgdGhlIGF2ZXJhZ2UgbGF0ZW5jeSBleGNlZWRzIHRoaXMgdGhyZXNob2xkLCB0aGVuIHRoZVxuICAgKiBsb2cgbWVzc2FnZSBpcyBzaG93biBhcyBhIHdhcm5pbmcuIEluIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGxvZ0xhYmVsIEEgbGFiZWwgdG8gc2hvdyBmb3IgZWFjaCBsYXRlbmN5IGxvZyBtZXNzYWdlLlxuICAgKi9cbiAgY29uc3RydWN0b3IobG9nUGVyaW9kLCBsYXRlbmN5V2FybmluZ1RocmVzaG9sZCwgbG9nTGFiZWwpIHtcbiAgICB0aGlzLl9sb2dQZXJpb2QgPSBsb2dQZXJpb2Q7XG4gICAgdGhpcy5fbGF0ZW5jeVdhcm5pbmdUaHJlc2hvbGQgPSBsYXRlbmN5V2FybmluZ1RocmVzaG9sZDtcbiAgICB0aGlzLl9sb2dMYWJlbCA9IGxvZ0xhYmVsO1xuXG4gICAgdGhpcy5fZnJhbWVDb3VudCA9IG51bGw7XG4gICAgdGhpcy5fbWF4RnJhbWVMYXRlbmN5ID0gbnVsbDtcbiAgICB0aGlzLl9taW5GcmFtZUxhdGVuY3kgPSBudWxsO1xuICAgIHRoaXMuX2F2Z0ZyYW1lTGF0ZW5jeSA9IG51bGw7XG5cbiAgICB0aGlzLl9pbnRlcnZhbElkID0gbnVsbDtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMucmVzZXQoKTtcblxuICAgIHRoaXMuX2ludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmxvZ0ZyYW1lTGF0ZW5jeSgpO1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH0sIHRoaXMuX2xvZ1BlcmlvZCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxJZCk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLl9mcmFtZUNvdW50ID0gMDtcbiAgICB0aGlzLl9tYXhGcmFtZUxhdGVuY3kgPSBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgIHRoaXMuX21pbkZyYW1lTGF0ZW5jeSA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgdGhpcy5fYXZnRnJhbWVMYXRlbmN5ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBLZWVwcyB0cmFjayBvZiBhIHJ1bm5pbmcgYXZlcmFnZSwgbWluIHZhbHVlLCBhbmQgbWF4IHZhbHVlIGZvciB0aGUgZnJhbWUgbGF0ZW5jaWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUhpZ2hSZXNUaW1lU3RhbXB9IGZyYW1lTGF0ZW5jeVxuICAgKi9cbiAgcmVjb3JkRnJhbWVMYXRlbmN5KGZyYW1lTGF0ZW5jeSkge1xuICAgIHRoaXMuX2ZyYW1lQ291bnQrKztcbiAgICB0aGlzLl9tYXhGcmFtZUxhdGVuY3kgPVxuICAgICAgICB0aGlzLl9tYXhGcmFtZUxhdGVuY3kgPCBmcmFtZUxhdGVuY3kgPyBmcmFtZUxhdGVuY3kgOiB0aGlzLl9tYXhGcmFtZUxhdGVuY3k7XG4gICAgdGhpcy5fbWluRnJhbWVMYXRlbmN5ID1cbiAgICAgICAgdGhpcy5fbWluRnJhbWVMYXRlbmN5ID4gZnJhbWVMYXRlbmN5ID8gZnJhbWVMYXRlbmN5IDogdGhpcy5fbWluRnJhbWVMYXRlbmN5O1xuICAgIHRoaXMuX2F2Z0ZyYW1lTGF0ZW5jeSA9XG4gICAgICAgIHRoaXMuX2F2Z0ZyYW1lTGF0ZW5jeSArIChmcmFtZUxhdGVuY3kgLSB0aGlzLl9hdmdGcmFtZUxhdGVuY3kpIC8gdGhpcy5fZnJhbWVDb3VudDtcbiAgfVxuXG4gIGxvZ0ZyYW1lTGF0ZW5jeSgpIHtcbiAgICBpZiAodGhpcy5fZnJhbWVDb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHt0aGlzLl9sb2dMYWJlbH06ICBBVkc9JHt0aGlzLl9hdmdGcmFtZUxhdGVuY3kudG9GaXhlZCgzKX0gIGAgK1xuICAgICAgICAgIGAoTUFYPSR7dGhpcy5fbWF4RnJhbWVMYXRlbmN5LnRvRml4ZWQoMyl9OyBNSU49JHt0aGlzLl9taW5GcmFtZUxhdGVuY3kudG9GaXhlZCgzKX0pYDtcbiAgICAgIGlmICh0aGlzLl9tYXhGcmFtZUxhdGVuY3kgPj0gdGhpcy5fbGF0ZW5jeVdhcm5pbmdUaHJlc2hvbGQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHtGcmFtZUxhdGVuY3lQcm9maWxlcn07XG4iLCJleHBvcnQgKiBmcm9tICcuL2FuaW1hdGlvbi1qb2InO1xuZXhwb3J0ICogZnJvbSAnLi9hbmltYXRvcic7XG5leHBvcnQgKiBmcm9tICcuL2ZyYW1lLWxhdGVuY3ktcHJvZmlsZXInO1xuZXhwb3J0ICogZnJvbSAnLi9wZXJzaXN0ZW50LWFuaW1hdGlvbi1qb2InO1xuZXhwb3J0ICogZnJvbSAnLi90cmFuc2llbnQtYW5pbWF0aW9uLWpvYic7XG4iLCJpbXBvcnQge0FuaW1hdGlvbkpvYn0gZnJvbSAnLi9hbmltYXRpb24tam9iJztcblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRBbmltYXRpb25Kb2IgcmVjdXJzIG9yIGhhcyBhbiBpbmRlZmluaXRlIGR1cmF0aW9uLlxuICpcbiAqIEBhYnN0cmFjdFxuICovXG5jbGFzcyBQZXJzaXN0ZW50QW5pbWF0aW9uSm9iIGV4dGVuZHMgQW5pbWF0aW9uSm9iIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlXSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIHRoaXMgQW5pbWF0aW9uSm9iIGlzIGZpbmlzaGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob25Db21wbGV0ZSkge1xuICAgIHN1cGVyKG9uQ29tcGxldGUpO1xuXG4gICAgLy8gUGVyc2lzdGVudEFuaW1hdGlvbkpvYiBpcyBhbiBhYnN0cmFjdCBjbGFzcy4gSXQgc2hvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXG4gICAgaWYgKG5ldy50YXJnZXQgPT09IFBlcnNpc3RlbnRBbmltYXRpb25Kb2IpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb25zdHJ1Y3QgUGVyc2lzdGVudEFuaW1hdGlvbkpvYiBpbnN0YW5jZXMgZGlyZWN0bHknKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICByZXNldCgpIHtcbiAgICAvLyBFeHRlbmRpbmcgY2xhc3NlcyBzaG91bGQgaW1wbGVtZW50IHRoaXMgbWV0aG9kLlxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQnKTtcbiAgfVxufVxuXG5leHBvcnQge1BlcnNpc3RlbnRBbmltYXRpb25Kb2J9O1xuIiwiaW1wb3J0IHtfdXRpbH0gZnJvbSAnLi91dGlsJztcblxuaW1wb3J0IHtBbmltYXRpb25Kb2J9IGZyb20gJy4vYW5pbWF0aW9uLWpvYic7XG5cbi8qKlxuICogQSBUcmFuc2llbnRBbmltYXRpb25Kb2IgaXMgdGVtcG9yYXJ5IGFuZCBoYXMgYSBkZWZpbml0ZSBiZWdpbm5pbmcgYW5kIGVuZC5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqL1xuY2xhc3MgVHJhbnNpZW50QW5pbWF0aW9uSm9iIGV4dGVuZHMgQW5pbWF0aW9uSm9iIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvblxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXlcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd9IGVhc2luZ0Z1bmN0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlXSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIHRoaXMgQW5pbWF0aW9uSm9iIGlzIGZpbmlzaGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZHVyYXRpb24sIGRlbGF5LCBlYXNpbmdGdW5jdGlvbiwgb25Db21wbGV0ZSkge1xuICAgIHN1cGVyKG9uQ29tcGxldGUpO1xuXG4gICAgLy8gVHJhbnNpZW50QW5pbWF0aW9uSm9iIGlzIGFuIGFic3RyYWN0IGNsYXNzLiBJdCBzaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cbiAgICBpZiAobmV3LnRhcmdldCA9PT0gVHJhbnNpZW50QW5pbWF0aW9uSm9iKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29uc3RydWN0IFRyYW5zaWVudEFuaW1hdGlvbkpvYiBpbnN0YW5jZXMgZGlyZWN0bHknKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgIHRoaXMuX2RlbGF5ID0gZGVsYXk7XG4gICAgdGhpcy5fZWFzaW5nRnVuY3Rpb24gPSB0eXBlb2YgZWFzaW5nRnVuY3Rpb24gPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBlYXNpbmdGdW5jdGlvblxuICAgICAgICA6IF91dGlsLmVhc2luZ0Z1bmN0aW9uc1tlYXNpbmdGdW5jdGlvbl07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldCBlbmRUaW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGFydFRpbWUgKyB0aGlzLl9kdXJhdGlvbiArIHRoaXMuX2RlbGF5O1xuICB9XG59XG5cbmV4cG9ydCB7VHJhbnNpZW50QW5pbWF0aW9uSm9ifTtcbiIsIi8qKlxuICogVGhpcyBtb2R1bGUgZGVmaW5lcyBhIGNvbGxlY3Rpb24gb2Ygc3RhdGljIHV0aWxpdHkgZnVuY3Rpb25zLlxuICovXG5cbi8vIEEgY29sbGVjdGlvbiBvZiBkaWZmZXJlbnQgdHlwZXMgb2YgZWFzaW5nIGZ1bmN0aW9ucy5cbmNvbnN0IGVhc2luZ0Z1bmN0aW9ucyA9IHtcbiAgbGluZWFyOiB0ID0+IHQsXG4gIGVhc2VJblF1YWQ6IHQgPT4gdCAqIHQsXG4gIGVhc2VPdXRRdWFkOiB0ID0+IHQgKiAoMiAtIHQpLFxuICBlYXNlSW5PdXRRdWFkOiB0ID0+IHQgPCAwLjUgPyAyICogdCAqIHQgOiAtMSArICg0IC0gMiAqIHQpICogdCxcbiAgZWFzZUluQ3ViaWM6IHQgPT4gdCAqIHQgKiB0LFxuICBlYXNlT3V0Q3ViaWM6IHQgPT4gMSArIC0tdCAqIHQgKiB0LFxuICBlYXNlSW5PdXRDdWJpYzogdCA9PiB0IDwgMC41ID8gNCAqIHQgKiB0ICogdCA6ICh0IC0gMSkgKiAoMiAqIHQgLSAyKSAqICgyICogdCAtIDIpICsgMSxcbiAgZWFzZUluUXVhcnQ6IHQgPT4gdCAqIHQgKiB0ICogdCxcbiAgZWFzZU91dFF1YXJ0OiB0ID0+IDEgLSAtLXQgKiB0ICogdCAqIHQsXG4gIGVhc2VJbk91dFF1YXJ0OiB0ID0+IHQgPCAwLjUgPyA4ICogdCAqIHQgKiB0ICogdCA6IDEgLSA4ICogLS10ICogdCAqIHQgKiB0LFxuICBlYXNlSW5RdWludDogdCA9PiB0ICogdCAqIHQgKiB0ICogdCxcbiAgZWFzZU91dFF1aW50OiB0ID0+IDEgKyAtLXQgKiB0ICogdCAqIHQgKiB0LFxuICBlYXNlSW5PdXRRdWludDogdCA9PiB0IDwgMC41ID8gMTYgKiB0ICogdCAqIHQgKiB0ICogdCA6IDEgKyAxNiAqIC0tdCAqIHQgKiB0ICogdCAqIHRcbn07XG5cbmNvbnN0IF91dGlsID0ge1xuICBlYXNpbmdGdW5jdGlvbnMsXG59O1xuXG5leHBvcnQge1xuICBfdXRpbCxcbn07XG4iXX0="}