{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/animation-job.js","src/animator.js","src/frame-latency-profiler.js","src/index.js","src/persistent-animation-job.js","src/transient-animation-job.js","src/util.js"],"names":[],"mappings":"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","file":"animatex.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/**\r\n * An AnimationJob is used with the animator controller to update and re-draw something each frame.\r\n *\r\n * @abstract\r\n */\r\nclass AnimationJob {\r\n  /**\r\n   * @param {Function} [onComplete] A callback to be called when this AnimationJob is finished.\r\n   */\r\n  constructor(onComplete) {\r\n    // AnimationJob is an abstract class. It should not be instantiated directly.\r\n    if (new.target === AnimationJob) {\r\n      throw new TypeError('Cannot construct AnimationJob instances directly');\r\n    }\r\n\r\n    this._startTime = 0;\r\n    this._isComplete = true;\r\n    this._onComplete = onComplete;\r\n  }\r\n\r\n  /**\r\n   * Indicates whether this AnimationJob is complete.\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  get isComplete() {\r\n    return this._isComplete;\r\n  }\r\n\r\n  /**\r\n   * Sets this AnimationJob as started.\r\n   *\r\n   * @param {DOMHighResTimeStamp} startTime\r\n   */\r\n  start(startTime) {\r\n    this._startTime = startTime;\r\n    this._isComplete = false;\r\n  }\r\n\r\n  /**\r\n   * Updates the animation progress of this AnimationJob to match the given time.\r\n   *\r\n   * This is called from the overall animation loop.\r\n   *\r\n   * @param {DOMHighResTimeStamp} currentTime\r\n   * @param {DOMHighResTimeStamp} deltaTime\r\n   * @abstract\r\n   */\r\n  update(currentTime, deltaTime) {\r\n    // Extending classes should implement this method.\r\n    throw new TypeError('Method not implemented');\r\n  }\r\n\r\n  /**\r\n   * Draws the current state of this AnimationJob.\r\n   *\r\n   * This is called from the overall animation loop.\r\n   *\r\n   * @abstract\r\n   */\r\n  draw() {\r\n    // Extending classes should implement this method.\r\n    throw new TypeError('Method not implemented');\r\n  }\r\n\r\n  /**\r\n   * Handles any necessary state for this AnimationJob being finished.\r\n   *\r\n   * @param {boolean} isCancelled\r\n   */\r\n  finish(isCancelled) {\r\n    console.log(`${this.constructor.name} ${isCancelled ? 'cancelled' : 'completed'}`);\r\n\r\n    this._isComplete = true;\r\n\r\n    if (this._onComplete) {\r\n      this._onComplete();\r\n    }\r\n  }\r\n}\r\n\r\nexport {AnimationJob};\r\n","import {FrameLatencyProfiler} from './frame-latency-profiler';\r\nimport {PersistentAnimationJob} from './persistent-animation-job';\r\nimport {TransientAnimationJob} from './transient-animation-job';\r\n\r\nconst _DELTA_TIME_UPPER_THRESHOLD = 200;\r\nconst _FRAME_DURATION_WARNING_THRESHOLD = 1000 / 30;\r\nconst _FRAME_LATENCY_LOG_PERIOD = 5000;\r\nconst _LATENCY_LOG_LABEL = 'Animation frame period';\r\n\r\n/**\r\n * This class handles the animation loop.\r\n *\r\n * This class's responsibilities include:\r\n * - updating modules for the current frame,\r\n * - drawing renderables for the current frame,\r\n * - starting and stopping transient animation jobs,\r\n * - capping time step durations at a max threshold.\r\n */\r\nclass Animator {\r\n  constructor() {\r\n    this._jobs = [];\r\n    this._previousTime = null;\r\n    this._isPaused = true;\r\n    this._requestAnimationFrameId = null;\r\n    this._totalUnpausedRunTime = 0;\r\n    this._lastUnpauseTime = null;\r\n    this._latencyProfiler = new FrameLatencyProfiler(_FRAME_LATENCY_LOG_PERIOD,\r\n        _FRAME_DURATION_WARNING_THRESHOLD, _LATENCY_LOG_LABEL);\r\n  }\r\n\r\n  /**\r\n   * Starts the given AnimationJob.\r\n   *\r\n   * @param {AnimationJob} job\r\n   */\r\n  startJob(job) {\r\n    // Is this a restart?\r\n    if (!job.isComplete) {\r\n      console.debug(`Restarting AnimationJob: ${job.constructor.name}`);\r\n\r\n      if (job instanceof PersistentAnimationJob) {\r\n        job.reset();\r\n      } else {\r\n        job.finish(true);\r\n        job.start(window.performance.now());\r\n      }\r\n    } else {\r\n      console.debug(`Starting AnimationJob: ${job.constructor.name}`);\r\n\r\n      job.start(this._previousTime);\r\n      this._jobs.push(job);\r\n    }\r\n\r\n    this._startAnimationLoop();\r\n  }\r\n\r\n  /**\r\n   * Cancels the given AnimationJob.\r\n   *\r\n   * @param {AnimationJob} job\r\n   */\r\n  cancelJob(job) {\r\n    console.debug(`Cancelling AnimationJob: ${job.constructor.name}`);\r\n    job.finish(true);\r\n  }\r\n\r\n  /**\r\n   * Cancels all running AnimationJobs.\r\n   */\r\n  cancelAll() {\r\n    while (this._jobs.length) {\r\n      this.cancelJob(this._jobs[0]);\r\n    }\r\n  }\r\n\r\n  /** @returns {DOMHighResTimeStamp} */\r\n  get currentTime() {\r\n    return this._previousTime;\r\n  }\r\n\r\n  /** @returns {boolean} */\r\n  get isPaused() {\r\n    return this._isPaused;\r\n  }\r\n\r\n  pause() {\r\n    this._stopAnimationLoop();\r\n    console.debug('Animator paused');\r\n  }\r\n\r\n  unpause() {\r\n    this._startAnimationLoop();\r\n    console.debug('Animator unpaused');\r\n  }\r\n\r\n  /**\r\n   * This is the animation loop that drives all of the animation.\r\n   *\r\n   * @param {DOMHighResTimeStamp} currentTime\r\n   * @private\r\n   */\r\n  _animationLoop(currentTime) {\r\n    // When pausing and restarting, it's possible for the previous time to be slightly inconsistent\r\n    // with the animationFrame time.\r\n    if (currentTime < this._previousTime) {\r\n      this._previousTime = currentTime - 1;\r\n    }\r\n\r\n    let deltaTime = currentTime - this._previousTime;\r\n    this._previousTime = currentTime;\r\n\r\n    this._latencyProfiler.recordFrameLatency(deltaTime);\r\n\r\n    // Large delays between frames can cause lead to instability in the system, so this caps them to\r\n    // a max threshold.\r\n    deltaTime = deltaTime > _DELTA_TIME_UPPER_THRESHOLD ?\r\n        _DELTA_TIME_UPPER_THRESHOLD : deltaTime;\r\n\r\n    if (!this._isPaused) {\r\n      this._requestAnimationFrameId =\r\n          window.requestAnimationFrame(currentTime => this._animationLoop(currentTime));\r\n      this._updateJobs(currentTime, deltaTime);\r\n      this._drawJobs();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates all of the active AnimationJobs.\r\n   *\r\n   * @param {DOMHighResTimeStamp} currentTime\r\n   * @param {DOMHighResTimeStamp} deltaTime\r\n   * @private\r\n   */\r\n  _updateJobs(currentTime, deltaTime) {\r\n    for (let i = 0, count = this._jobs.length; i < count; i++) {\r\n      let job = this._jobs[i];\r\n\r\n      // Remove jobs from the list after they are complete.\r\n      if (job.isComplete) {\r\n        this._removeJob(job, i);\r\n        i--;\r\n        count--;\r\n        continue;\r\n      }\r\n\r\n      // Check whether the job is transient and has reached its end.\r\n      if (job instanceof TransientAnimationJob && job.endTime < currentTime) {\r\n        job.finish(false);\r\n      } else {\r\n        job.update(currentTime, deltaTime);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes the given job from the collection of active, animating jobs.\r\n   *\r\n   * @param {AnimationJob} job\r\n   * @param {number} [index=-1]\r\n   * @private\r\n   */\r\n  _removeJob(job, index = -1) {\r\n    console.debug(`Removing AnimationJob: ${job.constructor.name}`);\r\n\r\n    if (index >= 0) {\r\n      this._jobs.splice(index, 1);\r\n    } else {\r\n      const count = this._jobs.length;\r\n      for (index = 0; index < count; index++) {\r\n        if (this._jobs[index] === job) {\r\n          this._jobs.splice(index, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Stop the animation loop when there are no more jobs to animate.\r\n    if (this._jobs.length === 0) {\r\n      this._stopAnimationLoop();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Draws all of the active AnimationJobs.\r\n   *\r\n   * @private\r\n   */\r\n  _drawJobs() {\r\n    for (let i = 0, count = this._jobs.length; i < count; i++) {\r\n      this._jobs[i].draw();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Starts the animation loop if it is not already running.\r\n   *\r\n   * This method is idempotent.\r\n   *\r\n   * @private\r\n   */\r\n  _startAnimationLoop() {\r\n    if (this._isPaused) {\r\n      this._lastUnpauseTime = window.performance.now();\r\n    }\r\n    this._isPaused = false;\r\n\r\n    // Only actually start the loop if it isn't already running and the page has focus.\r\n    if (!this._requestAnimationFrameId && !document.hidden) {\r\n      this._latencyProfiler.start();\r\n      this._previousTime = window.performance.now();\r\n      this._requestAnimationFrameId =\r\n          window.requestAnimationFrame(time => this._animationLoop(time));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stops the animation loop.\r\n   *\r\n   * @private\r\n   */\r\n  _stopAnimationLoop() {\r\n    if (!this._isPaused) {\r\n      this._totalUnpausedRunTime += this._timeSinceLastPaused;\r\n    }\r\n    this._isPaused = true;\r\n    window.cancelAnimationFrame(this._requestAnimationFrameId);\r\n    this._requestAnimationFrameId = null;\r\n    this._latencyProfiler.stop();\r\n  }\r\n\r\n  /**\r\n   * Creates a promise that will resolve on the next animation loop.\r\n   *\r\n   * @returns {Promise}\r\n   */\r\n  resolveOnNextFrame() {\r\n    return new Promise(window.requestAnimationFrame);\r\n  }\r\n\r\n  /**\r\n   * Gets the total amount of time the animator has been running while not paused.\r\n   *\r\n   * @returns {DOMHighResTimeStamp}\r\n   */\r\n  get totalRunTime() {\r\n    return this._isPaused\r\n        ? this._totalUnpausedRunTime\r\n        : this._totalUnpausedRunTime + this._timeSinceLastPaused;\r\n  }\r\n\r\n  /**\r\n   * @returns {DOMHighResTimeStamp}\r\n   */\r\n  get _timeSinceLastPaused() {\r\n    return window.performance.now() - this._lastUnpauseTime;\r\n  }\r\n}\r\n\r\nconst animator = new Animator();\r\n\r\nexport {animator};\r\n\r\n/**\r\n * @typedef {number} DOMHighResTimeStamp A number of milliseconds, accurate to one thousandth of a\r\n * millisecond.\r\n */\r\n\r\n","/**\r\n * This class keeps track of avg/min/max frame latencies over the last logging time period and\r\n * periodically logs these values.\r\n */\r\nclass FrameLatencyProfiler {\r\n  /**\r\n   * @param {number} logPeriod The period at which to print latency log messages. In milliseconds.\r\n   * @param {number} latencyWarningThreshold If the average latency exceeds this threshold, then the\r\n   * log message is shown as a warning. In milliseconds.\r\n   * @param {string} logLabel A label to show for each latency log message.\r\n   */\r\n  constructor(logPeriod, latencyWarningThreshold, logLabel) {\r\n    this._logPeriod = logPeriod;\r\n    this._latencyWarningThreshold = latencyWarningThreshold;\r\n    this._logLabel = logLabel;\r\n\r\n    this._frameCount = null;\r\n    this._maxFrameLatency = null;\r\n    this._minFrameLatency = null;\r\n    this._avgFrameLatency = null;\r\n\r\n    this._intervalId = null;\r\n  }\r\n\r\n  start() {\r\n    this.stop();\r\n    this.reset();\r\n\r\n    this._intervalId = setInterval(() => {\r\n      this.logFrameLatency();\r\n      this.reset();\r\n    }, this._logPeriod);\r\n  }\r\n\r\n  stop() {\r\n    clearInterval(this._intervalId);\r\n  }\r\n\r\n  reset() {\r\n    this._frameCount = 0;\r\n    this._maxFrameLatency = Number.MIN_VALUE;\r\n    this._minFrameLatency = Number.MAX_VALUE;\r\n    this._avgFrameLatency = 0;\r\n  }\r\n\r\n  /**\r\n   * Keeps track of a running average, min value, and max value for the frame latencies.\r\n   *\r\n   * @param {DOMHighResTimeStamp} frameLatency\r\n   */\r\n  recordFrameLatency(frameLatency) {\r\n    this._frameCount++;\r\n    this._maxFrameLatency =\r\n        this._maxFrameLatency < frameLatency ? frameLatency : this._maxFrameLatency;\r\n    this._minFrameLatency =\r\n        this._minFrameLatency > frameLatency ? frameLatency : this._minFrameLatency;\r\n    this._avgFrameLatency =\r\n        this._avgFrameLatency + (frameLatency - this._avgFrameLatency) / this._frameCount;\r\n  }\r\n\r\n  logFrameLatency() {\r\n    if (this._frameCount > 0) {\r\n      const message = `${this._logLabel}:  AVG=${this._avgFrameLatency.toFixed(3)}  ` +\r\n          `(MAX=${this._maxFrameLatency.toFixed(3)}; MIN=${this._minFrameLatency.toFixed(3)})`;\r\n      if (this._maxFrameLatency >= this._latencyWarningThreshold) {\r\n        console.warn(message);\r\n      } else {\r\n        console.debug(message);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport {FrameLatencyProfiler};\r\n","export * from './animation-job';\r\nexport * from './animator';\r\nexport * from './frame-latency-profiler';\r\nexport * from './persistent-animation-job';\r\nexport * from './transient-animation-job';\r\n","import {AnimationJob} from './animation-job';\r\n\r\n/**\r\n * A PersistentAnimationJob recurs or has an indefinite duration.\r\n *\r\n * @abstract\r\n */\r\nclass PersistentAnimationJob extends AnimationJob {\r\n  /**\r\n   * @param {Function} [onComplete] A callback to be called when this AnimationJob is finished.\r\n   */\r\n  constructor(onComplete) {\r\n    super(onComplete);\r\n\r\n    // PersistentAnimationJob is an abstract class. It should not be instantiated directly.\r\n    if (new.target === PersistentAnimationJob) {\r\n      throw new TypeError('Cannot construct PersistentAnimationJob instances directly');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   */\r\n  reset() {\r\n    // Extending classes should implement this method.\r\n    throw new TypeError('Method not implemented');\r\n  }\r\n}\r\n\r\nexport {PersistentAnimationJob};\r\n","import {_util} from './util';\r\n\r\nimport {AnimationJob} from './animation-job';\r\n\r\n/**\r\n * A TransientAnimationJob is temporary and has a definite beginning and end.\r\n *\r\n * @abstract\r\n */\r\nclass TransientAnimationJob extends AnimationJob {\r\n  /**\r\n   * @param {number} duration\r\n   * @param {number} delay\r\n   * @param {Function|String} easingFunction\r\n   * @param {Function} [onComplete] A callback to be called when this AnimationJob is finished.\r\n   */\r\n  constructor(duration, delay, easingFunction, onComplete) {\r\n    super(onComplete);\r\n\r\n    // TransientAnimationJob is an abstract class. It should not be instantiated directly.\r\n    if (new.target === TransientAnimationJob) {\r\n      throw new TypeError('Cannot construct TransientAnimationJob instances directly');\r\n    }\r\n\r\n    this._duration = duration;\r\n    this._delay = delay;\r\n    this._easingFunction = typeof easingFunction === 'function'\r\n        ? easingFunction\r\n        : _util.easingFunctions[easingFunction];\r\n  }\r\n\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get endTime() {\r\n    return this._startTime + this._duration + this._delay;\r\n  }\r\n}\r\n\r\nexport {TransientAnimationJob};\r\n","/**\r\n * This module defines a collection of static utility functions.\r\n */\r\n\r\n// A collection of different types of easing functions.\r\nconst easingFunctions = {\r\n  linear: t => t,\r\n  easeInQuad: t => t * t,\r\n  easeOutQuad: t => t * (2 - t),\r\n  easeInOutQuad: t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\r\n  easeInCubic: t => t * t * t,\r\n  easeOutCubic: t => 1 + --t * t * t,\r\n  easeInOutCubic: t => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\r\n  easeInQuart: t => t * t * t * t,\r\n  easeOutQuart: t => 1 - --t * t * t * t,\r\n  easeInOutQuart: t => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\r\n  easeInQuint: t => t * t * t * t * t,\r\n  easeOutQuint: t => 1 + --t * t * t * t * t,\r\n  easeInOutQuint: t => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t\r\n};\r\n\r\nconst _util = {\r\n  easingFunctions,\r\n};\r\n\r\nexport {\r\n  _util,\r\n};\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYW5pbWF0aW9uLWpvYi5qcyIsInNyYy9hbmltYXRvci5qcyIsInNyYy9mcmFtZS1sYXRlbmN5LXByb2ZpbGVyLmpzIiwic3JjL2luZGV4LmpzIiwic3JjL3BlcnNpc3RlbnQtYW5pbWF0aW9uLWpvYi5qcyIsInNyYy90cmFuc2llbnQtYW5pbWF0aW9uLWpvYi5qcyIsInNyYy91dGlsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBOzs7OztJQUtNLGU7QUFDSjs7O0FBR0EsV0FBQSxZQUFBLENBQUEsVUFBQSxFQUF3QjtBQUFBLG9CQUFBLElBQUEsRUFBQSxZQUFBOztBQUN0QjtBQUNBLFFBQUksSUFBQSxNQUFBLEtBQUosWUFBQSxFQUFpQztBQUMvQixZQUFNLElBQUEsU0FBQSxDQUFOLGtEQUFNLENBQU47QUFDRDs7QUFFRCxTQUFBLFVBQUEsR0FBQSxDQUFBO0FBQ0EsU0FBQSxXQUFBLEdBQUEsSUFBQTtBQUNBLFNBQUEsV0FBQSxHQUFBLFVBQUE7QUFDRDs7QUFFRDs7Ozs7Ozs7O0FBU0E7Ozs7OzBCQUtNLFMsRUFBVztBQUNmLFdBQUEsVUFBQSxHQUFBLFNBQUE7QUFDQSxXQUFBLFdBQUEsR0FBQSxLQUFBO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7OzsyQkFTTyxXLEVBQWEsUyxFQUFXO0FBQzdCO0FBQ0EsWUFBTSxJQUFBLFNBQUEsQ0FBTix3QkFBTSxDQUFOO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7MkJBT087QUFDTDtBQUNBLFlBQU0sSUFBQSxTQUFBLENBQU4sd0JBQU0sQ0FBTjtBQUNEOztBQUVEOzs7Ozs7OzsyQkFLTyxXLEVBQWE7QUFDbEIsY0FBQSxHQUFBLENBQWUsS0FBQSxXQUFBLENBQWYsSUFBZSxHQUFmLEdBQWUsSUFBeUIsY0FBQSxXQUFBLEdBQXhDLFdBQWUsQ0FBZjs7QUFFQSxXQUFBLFdBQUEsR0FB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QUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsZ0JBQUEsSUFBQTtBQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLGNBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7OztBQUNBLE9BQUEsSUFBQSxDQUFBLFNBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLFFBQUEsU0FBQSxJQUFBLFFBQUEsWUFBQSxFQUFBO0FBQUEsU0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLGdCQUFBLElBQUE7QUFBQSxTQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxVQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7QUFDQSxPQUFBLElBQUEsQ0FBQSxxQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsUUFBQSxTQUFBLElBQUEsUUFBQSxZQUFBLEVBQUE7QUFBQSxTQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsZ0JBQUEsSUFBQTtBQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHNCQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7QUFDQSxPQUFBLElBQUEsQ0FBQSx1QkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsUUFBQSxTQUFBLElBQUEsUUFBQSxZQUFBLEVBQUE7QUFBQSxTQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsZ0JBQUEsSUFBQTtBQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHdCQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7QUFDQSxPQUFBLElBQUEsQ0FBQSxzQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsUUFBQSxTQUFBLElBQUEs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QSxHQUFVLEtBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFWLENBQUEsR0FBbUMsSUFBSSxLQUFLLEVBQUwsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUE1QyxDQUFBO0FBQUE7QUFiTSxDQUF4Qjs7QUFnQkEsSUFBTSxRQUFRO0FBQ1osbUJBQUE7QUFEWSxDQUFkOztRQUtFLEssR0FBQSxLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqXHJcbiAqIEFuIEFuaW1hdGlvbkpvYiBpcyB1c2VkIHdpdGggdGhlIGFuaW1hdG9yIGNvbnRyb2xsZXIgdG8gdXBkYXRlIGFuZCByZS1kcmF3IHNvbWV0aGluZyBlYWNoIGZyYW1lLlxyXG4gKlxyXG4gKiBAYWJzdHJhY3RcclxuICovXHJcbmNsYXNzIEFuaW1hdGlvbkpvYiB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVdIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdoZW4gdGhpcyBBbmltYXRpb25Kb2IgaXMgZmluaXNoZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob25Db21wbGV0ZSkge1xyXG4gICAgLy8gQW5pbWF0aW9uSm9iIGlzIGFuIGFic3RyYWN0IGNsYXNzLiBJdCBzaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cclxuICAgIGlmIChuZXcudGFyZ2V0ID09PSBBbmltYXRpb25Kb2IpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnN0cnVjdCBBbmltYXRpb25Kb2IgaW5zdGFuY2VzIGRpcmVjdGx5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc3RhcnRUaW1lID0gMDtcclxuICAgIHRoaXMuX2lzQ29tcGxldGUgPSB0cnVlO1xyXG4gICAgdGhpcy5fb25Db21wbGV0ZSA9IG9uQ29tcGxldGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIEFuaW1hdGlvbkpvYiBpcyBjb21wbGV0ZS5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgZ2V0IGlzQ29tcGxldGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNDb21wbGV0ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhpcyBBbmltYXRpb25Kb2IgYXMgc3RhcnRlZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gc3RhcnRUaW1lXHJcbiAgICovXHJcbiAgc3RhcnQoc3RhcnRUaW1lKSB7XHJcbiAgICB0aGlzLl9zdGFydFRpbWUgPSBzdGFydFRpbWU7XHJcbiAgICB0aGlzLl9pc0NvbXBsZXRlID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBhbmltYXRpb24gcHJvZ3Jlc3Mgb2YgdGhpcyBBbmltYXRpb25Kb2IgdG8gbWF0Y2ggdGhlIGdpdmVuIHRpbWUuXHJcbiAgICpcclxuICAgKiBUaGlzIGlzIGNhbGxlZCBmcm9tIHRoZSBvdmVyYWxsIGFuaW1hdGlvbiBsb29wLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtET01IaWdoUmVzVGltZVN0YW1wfSBjdXJyZW50VGltZVxyXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gZGVsdGFUaW1lXHJcbiAgICogQGFic3RyYWN0XHJcbiAgICovXHJcbiAgdXBkYXRlKGN1cnJlbnRUaW1lLCBkZWx0YVRpbWUpIHtcclxuICAgIC8vIEV4dGVuZGluZyBjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnQgdGhpcyBtZXRob2QuXHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGlzIEFuaW1hdGlvbkpvYi5cclxuICAgKlxyXG4gICAqIFRoaXMgaXMgY2FsbGVkIGZyb20gdGhlIG92ZXJhbGwgYW5pbWF0aW9uIGxvb3AuXHJcbiAgICpcclxuICAgKiBAYWJzdHJhY3RcclxuICAgKi9cclxuICBkcmF3KCkge1xyXG4gICAgLy8gRXh0ZW5kaW5nIGNsYXNzZXMgc2hvdWxkIGltcGxlbWVudCB0aGlzIG1ldGhvZC5cclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZXMgYW55IG5lY2Vzc2FyeSBzdGF0ZSBmb3IgdGhpcyBBbmltYXRpb25Kb2IgYmVpbmcgZmluaXNoZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzQ2FuY2VsbGVkXHJcbiAgICovXHJcbiAgZmluaXNoKGlzQ2FuY2VsbGVkKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9ICR7aXNDYW5jZWxsZWQgPyAnY2FuY2VsbGVkJyA6ICdjb21wbGV0ZWQnfWApO1xyXG5cclxuICAgIHRoaXMuX2lzQ29tcGxldGUgPSB0cnVlO1xyXG5cclxuICAgIGlmICh0aGlzLl9vbkNvbXBsZXRlKSB7XHJcbiAgICAgIHRoaXMuX29uQ29tcGxldGUoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7QW5pbWF0aW9uSm9ifTtcclxuIiwiaW1wb3J0IHtGcmFtZUxhdGVuY3lQcm9maWxlcn0gZnJvbSAnLi9mcmFtZS1sYXRlbmN5LXByb2ZpbGVyJztcclxuaW1wb3J0IHtQZXJzaXN0ZW50QW5pbWF0aW9uSm9ifSBmcm9tICcuL3BlcnNpc3RlbnQtYW5pbWF0aW9uLWpvYic7XHJcbmltcG9ydCB7VHJhbnNpZW50QW5pbWF0aW9uSm9ifSBmcm9tICcuL3RyYW5zaWVudC1hbmltYXRpb24tam9iJztcclxuXHJcbmNvbnN0IF9ERUxUQV9USU1FX1VQUEVSX1RIUkVTSE9MRCA9IDIwMDtcclxuY29uc3QgX0ZSQU1FX0RVUkFUSU9OX1dBUk5JTkdfVEhSRVNIT0xEID0gMTAwMCAvIDMwO1xyXG5jb25zdCBfRlJBTUVfTEFURU5DWV9MT0dfUEVSSU9EID0gNTAwMDtcclxuY29uc3QgX0xBVEVOQ1lfTE9HX0xBQkVMID0gJ0FuaW1hdGlvbiBmcmFtZSBwZXJpb2QnO1xyXG5cclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgaGFuZGxlcyB0aGUgYW5pbWF0aW9uIGxvb3AuXHJcbiAqXHJcbiAqIFRoaXMgY2xhc3MncyByZXNwb25zaWJpbGl0aWVzIGluY2x1ZGU6XHJcbiAqIC0gdXBkYXRpbmcgbW9kdWxlcyBmb3IgdGhlIGN1cnJlbnQgZnJhbWUsXHJcbiAqIC0gZHJhd2luZyByZW5kZXJhYmxlcyBmb3IgdGhlIGN1cnJlbnQgZnJhbWUsXHJcbiAqIC0gc3RhcnRpbmcgYW5kIHN0b3BwaW5nIHRyYW5zaWVudCBhbmltYXRpb24gam9icyxcclxuICogLSBjYXBwaW5nIHRpbWUgc3RlcCBkdXJhdGlvbnMgYXQgYSBtYXggdGhyZXNob2xkLlxyXG4gKi9cclxuY2xhc3MgQW5pbWF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5fam9icyA9IFtdO1xyXG4gICAgdGhpcy5fcHJldmlvdXNUaW1lID0gbnVsbDtcclxuICAgIHRoaXMuX2lzUGF1c2VkID0gdHJ1ZTtcclxuICAgIHRoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZUlkID0gbnVsbDtcclxuICAgIHRoaXMuX3RvdGFsVW5wYXVzZWRSdW5UaW1lID0gMDtcclxuICAgIHRoaXMuX2xhc3RVbnBhdXNlVGltZSA9IG51bGw7XHJcbiAgICB0aGlzLl9sYXRlbmN5UHJvZmlsZXIgPSBuZXcgRnJhbWVMYXRlbmN5UHJvZmlsZXIoX0ZSQU1FX0xBVEVOQ1lfTE9HX1BFUklPRCxcclxuICAgICAgICBfRlJBTUVfRFVSQVRJT05fV0FSTklOR19USFJFU0hPTEQsIF9MQVRFTkNZX0xPR19MQUJFTCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGFydHMgdGhlIGdpdmVuIEFuaW1hdGlvbkpvYi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QW5pbWF0aW9uSm9ifSBqb2JcclxuICAgKi9cclxuICBzdGFydEpvYihqb2IpIHtcclxuICAgIC8vIElzIHRoaXMgYSByZXN0YXJ0P1xyXG4gICAgaWYgKCFqb2IuaXNDb21wbGV0ZSkge1xyXG4gICAgICBjb25zb2xlLmRlYnVnKGBSZXN0YXJ0aW5nIEFuaW1hdGlvbkpvYjogJHtqb2IuY29uc3RydWN0b3IubmFtZX1gKTtcclxuXHJcbiAgICAgIGlmIChqb2IgaW5zdGFuY2VvZiBQZXJzaXN0ZW50QW5pbWF0aW9uSm9iKSB7XHJcbiAgICAgICAgam9iLnJlc2V0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgam9iLmZpbmlzaCh0cnVlKTtcclxuICAgICAgICBqb2Iuc3RhcnQod2luZG93LnBlcmZvcm1hbmNlLm5vdygpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5kZWJ1ZyhgU3RhcnRpbmcgQW5pbWF0aW9uSm9iOiAke2pvYi5jb25zdHJ1Y3Rvci5uYW1lfWApO1xyXG5cclxuICAgICAgam9iLnN0YXJ0KHRoaXMuX3ByZXZpb3VzVGltZSk7XHJcbiAgICAgIHRoaXMuX2pvYnMucHVzaChqb2IpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3N0YXJ0QW5pbWF0aW9uTG9vcCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FuY2VscyB0aGUgZ2l2ZW4gQW5pbWF0aW9uSm9iLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBbmltYXRpb25Kb2J9IGpvYlxyXG4gICAqL1xyXG4gIGNhbmNlbEpvYihqb2IpIHtcclxuICAgIGNvbnNvbGUuZGVidWcoYENhbmNlbGxpbmcgQW5pbWF0aW9uSm9iOiAke2pvYi5jb25zdHJ1Y3Rvci5uYW1lfWApO1xyXG4gICAgam9iLmZpbmlzaCh0cnVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbmNlbHMgYWxsIHJ1bm5pbmcgQW5pbWF0aW9uSm9icy5cclxuICAgKi9cclxuICBjYW5jZWxBbGwoKSB7XHJcbiAgICB3aGlsZSAodGhpcy5fam9icy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5jYW5jZWxKb2IodGhpcy5fam9ic1swXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogQHJldHVybnMge0RPTUhpZ2hSZXNUaW1lU3RhbXB9ICovXHJcbiAgZ2V0IGN1cnJlbnRUaW1lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzVGltZTtcclxuICB9XHJcblxyXG4gIC8qKiBAcmV0dXJucyB7Ym9vbGVhbn0gKi9cclxuICBnZXQgaXNQYXVzZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNQYXVzZWQ7XHJcbiAgfVxyXG5cclxuICBwYXVzZSgpIHtcclxuICAgIHRoaXMuX3N0b3BBbmltYXRpb25Mb29wKCk7XHJcbiAgICBjb25zb2xlLmRlYnVnKCdBbmltYXRvciBwYXVzZWQnKTtcclxuICB9XHJcblxyXG4gIHVucGF1c2UoKSB7XHJcbiAgICB0aGlzLl9zdGFydEFuaW1hdGlvbkxvb3AoKTtcclxuICAgIGNvbnNvbGUuZGVidWcoJ0FuaW1hdG9yIHVucGF1c2VkJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIGlzIHRoZSBhbmltYXRpb24gbG9vcCB0aGF0IGRyaXZlcyBhbGwgb2YgdGhlIGFuaW1hdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gY3VycmVudFRpbWVcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9hbmltYXRpb25Mb29wKGN1cnJlbnRUaW1lKSB7XHJcbiAgICAvLyBXaGVuIHBhdXNpbmcgYW5kIHJlc3RhcnRpbmcsIGl0J3MgcG9zc2libGUgZm9yIHRoZSBwcmV2aW91cyB0aW1lIHRvIGJlIHNsaWdodGx5IGluY29uc2lzdGVudFxyXG4gICAgLy8gd2l0aCB0aGUgYW5pbWF0aW9uRnJhbWUgdGltZS5cclxuICAgIGlmIChjdXJyZW50VGltZSA8IHRoaXMuX3ByZXZpb3VzVGltZSkge1xyXG4gICAgICB0aGlzLl9wcmV2aW91c1RpbWUgPSBjdXJyZW50VGltZSAtIDE7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGRlbHRhVGltZSA9IGN1cnJlbnRUaW1lIC0gdGhpcy5fcHJldmlvdXNUaW1lO1xyXG4gICAgdGhpcy5fcHJldmlvdXNUaW1lID0gY3VycmVudFRpbWU7XHJcblxyXG4gICAgdGhpcy5fbGF0ZW5jeVByb2ZpbGVyLnJlY29yZEZyYW1lTGF0ZW5jeShkZWx0YVRpbWUpO1xyXG5cclxuICAgIC8vIExhcmdlIGRlbGF5cyBiZXR3ZWVuIGZyYW1lcyBjYW4gY2F1c2UgbGVhZCB0byBpbnN0YWJpbGl0eSBpbiB0aGUgc3lzdGVtLCBzbyB0aGlzIGNhcHMgdGhlbSB0b1xyXG4gICAgLy8gYSBtYXggdGhyZXNob2xkLlxyXG4gICAgZGVsdGFUaW1lID0gZGVsdGFUaW1lID4gX0RFTFRBX1RJTUVfVVBQRVJfVEhSRVNIT0xEID9cclxuICAgICAgICBfREVMVEFfVElNRV9VUFBFUl9USFJFU0hPTEQgOiBkZWx0YVRpbWU7XHJcblxyXG4gICAgaWYgKCF0aGlzLl9pc1BhdXNlZCkge1xyXG4gICAgICB0aGlzLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCA9XHJcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGN1cnJlbnRUaW1lID0+IHRoaXMuX2FuaW1hdGlvbkxvb3AoY3VycmVudFRpbWUpKTtcclxuICAgICAgdGhpcy5fdXBkYXRlSm9icyhjdXJyZW50VGltZSwgZGVsdGFUaW1lKTtcclxuICAgICAgdGhpcy5fZHJhd0pvYnMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgYWxsIG9mIHRoZSBhY3RpdmUgQW5pbWF0aW9uSm9icy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gY3VycmVudFRpbWVcclxuICAgKiBAcGFyYW0ge0RPTUhpZ2hSZXNUaW1lU3RhbXB9IGRlbHRhVGltZVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX3VwZGF0ZUpvYnMoY3VycmVudFRpbWUsIGRlbHRhVGltZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDAsIGNvdW50ID0gdGhpcy5fam9icy5sZW5ndGg7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgIGxldCBqb2IgPSB0aGlzLl9qb2JzW2ldO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIGpvYnMgZnJvbSB0aGUgbGlzdCBhZnRlciB0aGV5IGFyZSBjb21wbGV0ZS5cclxuICAgICAgaWYgKGpvYi5pc0NvbXBsZXRlKSB7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlSm9iKGpvYiwgaSk7XHJcbiAgICAgICAgaS0tO1xyXG4gICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIGpvYiBpcyB0cmFuc2llbnQgYW5kIGhhcyByZWFjaGVkIGl0cyBlbmQuXHJcbiAgICAgIGlmIChqb2IgaW5zdGFuY2VvZiBUcmFuc2llbnRBbmltYXRpb25Kb2IgJiYgam9iLmVuZFRpbWUgPCBjdXJyZW50VGltZSkge1xyXG4gICAgICAgIGpvYi5maW5pc2goZmFsc2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGpvYi51cGRhdGUoY3VycmVudFRpbWUsIGRlbHRhVGltZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgdGhlIGdpdmVuIGpvYiBmcm9tIHRoZSBjb2xsZWN0aW9uIG9mIGFjdGl2ZSwgYW5pbWF0aW5nIGpvYnMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FuaW1hdGlvbkpvYn0gam9iXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtpbmRleD0tMV1cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9yZW1vdmVKb2Ioam9iLCBpbmRleCA9IC0xKSB7XHJcbiAgICBjb25zb2xlLmRlYnVnKGBSZW1vdmluZyBBbmltYXRpb25Kb2I6ICR7am9iLmNvbnN0cnVjdG9yLm5hbWV9YCk7XHJcblxyXG4gICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgdGhpcy5fam9icy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9qb2JzLmxlbmd0aDtcclxuICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgY291bnQ7IGluZGV4KyspIHtcclxuICAgICAgICBpZiAodGhpcy5fam9ic1tpbmRleF0gPT09IGpvYikge1xyXG4gICAgICAgICAgdGhpcy5fam9icy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RvcCB0aGUgYW5pbWF0aW9uIGxvb3Agd2hlbiB0aGVyZSBhcmUgbm8gbW9yZSBqb2JzIHRvIGFuaW1hdGUuXHJcbiAgICBpZiAodGhpcy5fam9icy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5fc3RvcEFuaW1hdGlvbkxvb3AoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIGFsbCBvZiB0aGUgYWN0aXZlIEFuaW1hdGlvbkpvYnMuXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9kcmF3Sm9icygpIHtcclxuICAgIGZvciAobGV0IGkgPSAwLCBjb3VudCA9IHRoaXMuX2pvYnMubGVuZ3RoOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICB0aGlzLl9qb2JzW2ldLmRyYXcoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0YXJ0cyB0aGUgYW5pbWF0aW9uIGxvb3AgaWYgaXQgaXMgbm90IGFscmVhZHkgcnVubmluZy5cclxuICAgKlxyXG4gICAqIFRoaXMgbWV0aG9kIGlzIGlkZW1wb3RlbnQuXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9zdGFydEFuaW1hdGlvbkxvb3AoKSB7XHJcbiAgICBpZiAodGhpcy5faXNQYXVzZWQpIHtcclxuICAgICAgdGhpcy5fbGFzdFVucGF1c2VUaW1lID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNQYXVzZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBPbmx5IGFjdHVhbGx5IHN0YXJ0IHRoZSBsb29wIGlmIGl0IGlzbid0IGFscmVhZHkgcnVubmluZyBhbmQgdGhlIHBhZ2UgaGFzIGZvY3VzLlxyXG4gICAgaWYgKCF0aGlzLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCAmJiAhZG9jdW1lbnQuaGlkZGVuKSB7XHJcbiAgICAgIHRoaXMuX2xhdGVuY3lQcm9maWxlci5zdGFydCgpO1xyXG4gICAgICB0aGlzLl9wcmV2aW91c1RpbWUgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgIHRoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZUlkID1cclxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGltZSA9PiB0aGlzLl9hbmltYXRpb25Mb29wKHRpbWUpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3BzIHRoZSBhbmltYXRpb24gbG9vcC5cclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX3N0b3BBbmltYXRpb25Mb29wKCkge1xyXG4gICAgaWYgKCF0aGlzLl9pc1BhdXNlZCkge1xyXG4gICAgICB0aGlzLl90b3RhbFVucGF1c2VkUnVuVGltZSArPSB0aGlzLl90aW1lU2luY2VMYXN0UGF1c2VkO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faXNQYXVzZWQgPSB0cnVlO1xyXG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZUlkKTtcclxuICAgIHRoaXMuX3JlcXVlc3RBbmltYXRpb25GcmFtZUlkID0gbnVsbDtcclxuICAgIHRoaXMuX2xhdGVuY3lQcm9maWxlci5zdG9wKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvbiB0aGUgbmV4dCBhbmltYXRpb24gbG9vcC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAqL1xyXG4gIHJlc29sdmVPbk5leHRGcmFtZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGhlIHRvdGFsIGFtb3VudCBvZiB0aW1lIHRoZSBhbmltYXRvciBoYXMgYmVlbiBydW5uaW5nIHdoaWxlIG5vdCBwYXVzZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7RE9NSGlnaFJlc1RpbWVTdGFtcH1cclxuICAgKi9cclxuICBnZXQgdG90YWxSdW5UaW1lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzUGF1c2VkXHJcbiAgICAgICAgPyB0aGlzLl90b3RhbFVucGF1c2VkUnVuVGltZVxyXG4gICAgICAgIDogdGhpcy5fdG90YWxVbnBhdXNlZFJ1blRpbWUgKyB0aGlzLl90aW1lU2luY2VMYXN0UGF1c2VkO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHJldHVybnMge0RPTUhpZ2hSZXNUaW1lU3RhbXB9XHJcbiAgICovXHJcbiAgZ2V0IF90aW1lU2luY2VMYXN0UGF1c2VkKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuX2xhc3RVbnBhdXNlVGltZTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGFuaW1hdG9yID0gbmV3IEFuaW1hdG9yKCk7XHJcblxyXG5leHBvcnQge2FuaW1hdG9yfTtcclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7bnVtYmVyfSBET01IaWdoUmVzVGltZVN0YW1wIEEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYWNjdXJhdGUgdG8gb25lIHRob3VzYW5kdGggb2YgYVxyXG4gKiBtaWxsaXNlY29uZC5cclxuICovXHJcblxyXG4iLCIvKipcclxuICogVGhpcyBjbGFzcyBrZWVwcyB0cmFjayBvZiBhdmcvbWluL21heCBmcmFtZSBsYXRlbmNpZXMgb3ZlciB0aGUgbGFzdCBsb2dnaW5nIHRpbWUgcGVyaW9kIGFuZFxyXG4gKiBwZXJpb2RpY2FsbHkgbG9ncyB0aGVzZSB2YWx1ZXMuXHJcbiAqL1xyXG5jbGFzcyBGcmFtZUxhdGVuY3lQcm9maWxlciB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxvZ1BlcmlvZCBUaGUgcGVyaW9kIGF0IHdoaWNoIHRvIHByaW50IGxhdGVuY3kgbG9nIG1lc3NhZ2VzLiBJbiBtaWxsaXNlY29uZHMuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxhdGVuY3lXYXJuaW5nVGhyZXNob2xkIElmIHRoZSBhdmVyYWdlIGxhdGVuY3kgZXhjZWVkcyB0aGlzIHRocmVzaG9sZCwgdGhlbiB0aGVcclxuICAgKiBsb2cgbWVzc2FnZSBpcyBzaG93biBhcyBhIHdhcm5pbmcuIEluIG1pbGxpc2Vjb25kcy5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbG9nTGFiZWwgQSBsYWJlbCB0byBzaG93IGZvciBlYWNoIGxhdGVuY3kgbG9nIG1lc3NhZ2UuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IobG9nUGVyaW9kLCBsYXRlbmN5V2FybmluZ1RocmVzaG9sZCwgbG9nTGFiZWwpIHtcclxuICAgIHRoaXMuX2xvZ1BlcmlvZCA9IGxvZ1BlcmlvZDtcclxuICAgIHRoaXMuX2xhdGVuY3lXYXJuaW5nVGhyZXNob2xkID0gbGF0ZW5jeVdhcm5pbmdUaHJlc2hvbGQ7XHJcbiAgICB0aGlzLl9sb2dMYWJlbCA9IGxvZ0xhYmVsO1xyXG5cclxuICAgIHRoaXMuX2ZyYW1lQ291bnQgPSBudWxsO1xyXG4gICAgdGhpcy5fbWF4RnJhbWVMYXRlbmN5ID0gbnVsbDtcclxuICAgIHRoaXMuX21pbkZyYW1lTGF0ZW5jeSA9IG51bGw7XHJcbiAgICB0aGlzLl9hdmdGcmFtZUxhdGVuY3kgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuX2ludGVydmFsSWQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgc3RhcnQoKSB7XHJcbiAgICB0aGlzLnN0b3AoKTtcclxuICAgIHRoaXMucmVzZXQoKTtcclxuXHJcbiAgICB0aGlzLl9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB0aGlzLmxvZ0ZyYW1lTGF0ZW5jeSgpO1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9LCB0aGlzLl9sb2dQZXJpb2QpO1xyXG4gIH1cclxuXHJcbiAgc3RvcCgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxJZCk7XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuX2ZyYW1lQ291bnQgPSAwO1xyXG4gICAgdGhpcy5fbWF4RnJhbWVMYXRlbmN5ID0gTnVtYmVyLk1JTl9WQUxVRTtcclxuICAgIHRoaXMuX21pbkZyYW1lTGF0ZW5jeSA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICB0aGlzLl9hdmdGcmFtZUxhdGVuY3kgPSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogS2VlcHMgdHJhY2sgb2YgYSBydW5uaW5nIGF2ZXJhZ2UsIG1pbiB2YWx1ZSwgYW5kIG1heCB2YWx1ZSBmb3IgdGhlIGZyYW1lIGxhdGVuY2llcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gZnJhbWVMYXRlbmN5XHJcbiAgICovXHJcbiAgcmVjb3JkRnJhbWVMYXRlbmN5KGZyYW1lTGF0ZW5jeSkge1xyXG4gICAgdGhpcy5fZnJhbWVDb3VudCsrO1xyXG4gICAgdGhpcy5fbWF4RnJhbWVMYXRlbmN5ID1cclxuICAgICAgICB0aGlzLl9tYXhGcmFtZUxhdGVuY3kgPCBmcmFtZUxhdGVuY3kgPyBmcmFtZUxhdGVuY3kgOiB0aGlzLl9tYXhGcmFtZUxhdGVuY3k7XHJcbiAgICB0aGlzLl9taW5GcmFtZUxhdGVuY3kgPVxyXG4gICAgICAgIHRoaXMuX21pbkZyYW1lTGF0ZW5jeSA+IGZyYW1lTGF0ZW5jeSA/IGZyYW1lTGF0ZW5jeSA6IHRoaXMuX21pbkZyYW1lTGF0ZW5jeTtcclxuICAgIHRoaXMuX2F2Z0ZyYW1lTGF0ZW5jeSA9XHJcbiAgICAgICAgdGhpcy5fYXZnRnJhbWVMYXRlbmN5ICsgKGZyYW1lTGF0ZW5jeSAtIHRoaXMuX2F2Z0ZyYW1lTGF0ZW5jeSkgLyB0aGlzLl9mcmFtZUNvdW50O1xyXG4gIH1cclxuXHJcbiAgbG9nRnJhbWVMYXRlbmN5KCkge1xyXG4gICAgaWYgKHRoaXMuX2ZyYW1lQ291bnQgPiAwKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHt0aGlzLl9sb2dMYWJlbH06ICBBVkc9JHt0aGlzLl9hdmdGcmFtZUxhdGVuY3kudG9GaXhlZCgzKX0gIGAgK1xyXG4gICAgICAgICAgYChNQVg9JHt0aGlzLl9tYXhGcmFtZUxhdGVuY3kudG9GaXhlZCgzKX07IE1JTj0ke3RoaXMuX21pbkZyYW1lTGF0ZW5jeS50b0ZpeGVkKDMpfSlgO1xyXG4gICAgICBpZiAodGhpcy5fbWF4RnJhbWVMYXRlbmN5ID49IHRoaXMuX2xhdGVuY3lXYXJuaW5nVGhyZXNob2xkKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcobWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7RnJhbWVMYXRlbmN5UHJvZmlsZXJ9O1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2FuaW1hdGlvbi1qb2InO1xyXG5leHBvcnQgKiBmcm9tICcuL2FuaW1hdG9yJztcclxuZXhwb3J0ICogZnJvbSAnLi9mcmFtZS1sYXRlbmN5LXByb2ZpbGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi9wZXJzaXN0ZW50LWFuaW1hdGlvbi1qb2InO1xyXG5leHBvcnQgKiBmcm9tICcuL3RyYW5zaWVudC1hbmltYXRpb24tam9iJztcclxuIiwiaW1wb3J0IHtBbmltYXRpb25Kb2J9IGZyb20gJy4vYW5pbWF0aW9uLWpvYic7XHJcblxyXG4vKipcclxuICogQSBQZXJzaXN0ZW50QW5pbWF0aW9uSm9iIHJlY3VycyBvciBoYXMgYW4gaW5kZWZpbml0ZSBkdXJhdGlvbi5cclxuICpcclxuICogQGFic3RyYWN0XHJcbiAqL1xyXG5jbGFzcyBQZXJzaXN0ZW50QW5pbWF0aW9uSm9iIGV4dGVuZHMgQW5pbWF0aW9uSm9iIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Db21wbGV0ZV0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiB0aGlzIEFuaW1hdGlvbkpvYiBpcyBmaW5pc2hlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvbkNvbXBsZXRlKSB7XHJcbiAgICBzdXBlcihvbkNvbXBsZXRlKTtcclxuXHJcbiAgICAvLyBQZXJzaXN0ZW50QW5pbWF0aW9uSm9iIGlzIGFuIGFic3RyYWN0IGNsYXNzLiBJdCBzaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cclxuICAgIGlmIChuZXcudGFyZ2V0ID09PSBQZXJzaXN0ZW50QW5pbWF0aW9uSm9iKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb25zdHJ1Y3QgUGVyc2lzdGVudEFuaW1hdGlvbkpvYiBpbnN0YW5jZXMgZGlyZWN0bHknKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBhYnN0cmFjdFxyXG4gICAqL1xyXG4gIHJlc2V0KCkge1xyXG4gICAgLy8gRXh0ZW5kaW5nIGNsYXNzZXMgc2hvdWxkIGltcGxlbWVudCB0aGlzIG1ldGhvZC5cclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQnKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7UGVyc2lzdGVudEFuaW1hdGlvbkpvYn07XHJcbiIsImltcG9ydCB7X3V0aWx9IGZyb20gJy4vdXRpbCc7XHJcblxyXG5pbXBvcnQge0FuaW1hdGlvbkpvYn0gZnJvbSAnLi9hbmltYXRpb24tam9iJztcclxuXHJcbi8qKlxyXG4gKiBBIFRyYW5zaWVudEFuaW1hdGlvbkpvYiBpcyB0ZW1wb3JhcnkgYW5kIGhhcyBhIGRlZmluaXRlIGJlZ2lubmluZyBhbmQgZW5kLlxyXG4gKlxyXG4gKiBAYWJzdHJhY3RcclxuICovXHJcbmNsYXNzIFRyYW5zaWVudEFuaW1hdGlvbkpvYiBleHRlbmRzIEFuaW1hdGlvbkpvYiB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5XHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd9IGVhc2luZ0Z1bmN0aW9uXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVdIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdoZW4gdGhpcyBBbmltYXRpb25Kb2IgaXMgZmluaXNoZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZHVyYXRpb24sIGRlbGF5LCBlYXNpbmdGdW5jdGlvbiwgb25Db21wbGV0ZSkge1xyXG4gICAgc3VwZXIob25Db21wbGV0ZSk7XHJcblxyXG4gICAgLy8gVHJhbnNpZW50QW5pbWF0aW9uSm9iIGlzIGFuIGFic3RyYWN0IGNsYXNzLiBJdCBzaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cclxuICAgIGlmIChuZXcudGFyZ2V0ID09PSBUcmFuc2llbnRBbmltYXRpb25Kb2IpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnN0cnVjdCBUcmFuc2llbnRBbmltYXRpb25Kb2IgaW5zdGFuY2VzIGRpcmVjdGx5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgIHRoaXMuX2RlbGF5ID0gZGVsYXk7XHJcbiAgICB0aGlzLl9lYXNpbmdGdW5jdGlvbiA9IHR5cGVvZiBlYXNpbmdGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgID8gZWFzaW5nRnVuY3Rpb25cclxuICAgICAgICA6IF91dGlsLmVhc2luZ0Z1bmN0aW9uc1tlYXNpbmdGdW5jdGlvbl07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAqL1xyXG4gIGdldCBlbmRUaW1lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N0YXJ0VGltZSArIHRoaXMuX2R1cmF0aW9uICsgdGhpcy5fZGVsYXk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQge1RyYW5zaWVudEFuaW1hdGlvbkpvYn07XHJcbiIsIi8qKlxyXG4gKiBUaGlzIG1vZHVsZSBkZWZpbmVzIGEgY29sbGVjdGlvbiBvZiBzdGF0aWMgdXRpbGl0eSBmdW5jdGlvbnMuXHJcbiAqL1xyXG5cclxuLy8gQSBjb2xsZWN0aW9uIG9mIGRpZmZlcmVudCB0eXBlcyBvZiBlYXNpbmcgZnVuY3Rpb25zLlxyXG5jb25zdCBlYXNpbmdGdW5jdGlvbnMgPSB7XHJcbiAgbGluZWFyOiB0ID0+IHQsXHJcbiAgZWFzZUluUXVhZDogdCA9PiB0ICogdCxcclxuICBlYXNlT3V0UXVhZDogdCA9PiB0ICogKDIgLSB0KSxcclxuICBlYXNlSW5PdXRRdWFkOiB0ID0+IHQgPCAwLjUgPyAyICogdCAqIHQgOiAtMSArICg0IC0gMiAqIHQpICogdCxcclxuICBlYXNlSW5DdWJpYzogdCA9PiB0ICogdCAqIHQsXHJcbiAgZWFzZU91dEN1YmljOiB0ID0+IDEgKyAtLXQgKiB0ICogdCxcclxuICBlYXNlSW5PdXRDdWJpYzogdCA9PiB0IDwgMC41ID8gNCAqIHQgKiB0ICogdCA6ICh0IC0gMSkgKiAoMiAqIHQgLSAyKSAqICgyICogdCAtIDIpICsgMSxcclxuICBlYXNlSW5RdWFydDogdCA9PiB0ICogdCAqIHQgKiB0LFxyXG4gIGVhc2VPdXRRdWFydDogdCA9PiAxIC0gLS10ICogdCAqIHQgKiB0LFxyXG4gIGVhc2VJbk91dFF1YXJ0OiB0ID0+IHQgPCAwLjUgPyA4ICogdCAqIHQgKiB0ICogdCA6IDEgLSA4ICogLS10ICogdCAqIHQgKiB0LFxyXG4gIGVhc2VJblF1aW50OiB0ID0+IHQgKiB0ICogdCAqIHQgKiB0LFxyXG4gIGVhc2VPdXRRdWludDogdCA9PiAxICsgLS10ICogdCAqIHQgKiB0ICogdCxcclxuICBlYXNlSW5PdXRRdWludDogdCA9PiB0IDwgMC41ID8gMTYgKiB0ICogdCAqIHQgKiB0ICogdCA6IDEgKyAxNiAqIC0tdCAqIHQgKiB0ICogdCAqIHRcclxufTtcclxuXHJcbmNvbnN0IF91dGlsID0ge1xyXG4gIGVhc2luZ0Z1bmN0aW9ucyxcclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgX3V0aWwsXHJcbn07XHJcbiJdfQ=="}